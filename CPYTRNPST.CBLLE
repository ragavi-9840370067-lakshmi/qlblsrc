000100210224      ******************************************************************
000200180924      *                                                                *
000300200507      *    CPYTRNPST - TRNPST COPYBOOK TO STORE CHANGE HISTORY         *
000400180927      *                                                                *
000500050614      ******************************************************************
000600180927      *
000700050614      ******************************************************************
000800200619      * PROGRAMMER *DATE OF CHANGE* DESCRIPTION OF CHANGE              *
000900050614      ******************************************************************
001000180726      * Reece Tam  *  1996/01/15  * Fix locked-in account problem.     *
001100210112      *            *              *                                    *
001200050614      * R.Hollander*  1996/03/29  * Add CQD to level88 (Cheque Deposit)*
001300050614      *            *              *                                    *
001400050614      * R.Hollander*  1996/04/15  * Add DSC Logic to allow AWD Free    *
001500050614      *            *              * Units                              *
001600171107      *            *              *                                    *
001700050614      * R.Hollander*  1996/05/15  * Grossups on FE sells not working   *
001800210221      *            *              * fixed in CALC-GROSS-AMT ROUTINE    *
001900050614      *            *              *                                    *
002000050614      * R.Hollander*  1996/06/14  * Add MFR and FEE processing.        *
002100050614      *            *              *                                    *
002200050614      * R.Hollander*  1996/06/21  * Add DSC Prorated Free              *
002300210809      *            *              *                                    *
002400050614      * R.Hollander*  1996/07/24  * Fix Distrib allocation for child   *
002500050614      *            *              * record with non A status print     *
002600050614      *            *              *                                    *
002700050614      * Reece Tam  *  1996/10/31  * Fix dis.option 'R' for MFR trans.  *
002800050614      *            *              *                                    *
002900050614      * Reece Tam  *  1996/11/01  * Add back logic to zero average     *
003000050614      *            *              * cost basis when curr-unit-bal = 0. *
003100050614      *            *              *                                    *
003200050614      * R.Hollander*  1996/11/06  * Allow YE 0$ capital gain txn to be *
003300050614      *            *              * processsed for foreign MM funds    *
003400050614      *            *              *                                    *
003500050614      * R.Hollander*  1996/11/06  * Process user defined spot rates on *
003600050614      *            *              * switches                           *
003700210112      *            *              *                                    *
003800050614      * Reece Tam  *  1996/12/06  * Remove logic for average unit cost.*
003900050614      *            *              * Add daily process sequence number. *
004000050614      *            *              *                                    *
004100050614      * R.Hollander*  1997/03/04  * User definable exchange rate logic *
004200050614      *            *              * for switches and tax calculations  *
004300050614      *            *              *                                    *
004400050614      * R.Hollander*  1997/05/06  * Add logic for free to be reduced   *
004500050614      *            *              * across partnerships (MCO specific) *
004600050614      *            *              *                                    *
004700050614      * R.Hollander*  1997/05/06  * Add logic to charge DSC on free    *
004800050614      *            *              * if all units redeemed (MCO         *
004900050614      *            *              * specific)                          *
005000050614      *            *              *                                    *
005100050614      * R.Hollander*  1997/05/06  * Add reinvest-distrib-as opt        *
005200050614      *            *              *                                    *
005300050614      * R.Hollander*  1997/05/07  * Allow processing of BAJ/RAJ        *
005400050614      *            *              *                                    *
005500050614      * K. Trotman *  1997/06/16  * Add logic for Distr. to Repurchase *
005600050614      *            *              *                                    *
005700050614      * R.Hollander*  1997/06/27  * Allow processing of MRG transaction*
005800050614      *            *              *                                    *
005900050614      * R.Hollander*  1997/06/27  * Process MERGE/DSR using XDIV price *
006000050614      *            *              *                                    *
006100050614      * R.Hollander*  1997/06/27  * Process FCR using XDIV price       *
006200050614      *            *              *                                    *
006300050614      * M.Howorth  *  1997/07/31  * - Modifications to the handling of *
006400050614      *            *     thru     *   leap years when determining the  *
006500050614      *            *  1997/08/05  *   number of days between dates.    *
006600050614      *            *              *                                    *
006700050614      * M.Howorth  *  1997/08/07  * RFS #513                           *
006800050614      *            *              * - Update the SETTLEMENT-AMT to the *
006900050614      *            *              *   NET-AMT for distributions.       *
007000050614      *            *              *                                    *
007100050614      * R.Hollander*  1997/10/17  * Attributes of switch to charge     *
007200050614      *            *              * cash distributions daily accrual   *
007300050614      *            *              * options carried over from parent   *
007400050614      *            *              *                                    *
007500050614      * R.Hollander*  1997/11/20  * Change so that taxes are calculated*
007600050614      *            *              * on net amount                      *
007700050614      *            *              *                                    *
007800050614      * R.Hollander*  1997/11/24  * Add split options 'M' and 'T'      *
007900050614      *            *              *                                    *
008000050614      * D.Menezes  *  1998/01/22  * Add functionality to support       *
008100050614      *            *              * "Fixed" sponsor rate (ie. sponsor  *
008200050614      *            *              * rate will be calculated as % of    *
008300050614      *            *              * gross amount rather than % of      *
008400050614      *            *              * commission amount.                 *
008500050614      *            *              *                                    *
008600050614      * M.Howorth  *  1998/02/17  * RFS #1546                          *
008700050614      *            *     thru     * - Added the PAC Assignment         *
008800050614      *            *  1998/03/11  *   Generation logic, from the       *
008900050614      *            *              *   POWERHOUSE program ptDLYASNGN.   *
009000050614      *            *              *                                    *
009100050614      * R.Hollander*              * Allow processing of notional       *
009200050614      *            *              * distributions                      *
009300050614      *            *              *                                    *
009400050614      * M.Howorth  *  1998/03/20  * RFS #1787                          *
009500050614      *            *              * - Modifications to retain the      *
009600050614      *            *              *   PAC Assignment status of the     *
009700050614      *            *              *   FROM transaction when creating   *
009800050614      *            *              *   the TO transaction.              *
009900050614      *            *              *                                    *
010000050614      * R.HOLLANDER*  1998/04/01  * RFS #2355                          *
010100050614      *            *              * Do not write trans exchange rate   *
010200050614      *            *              * record when switch                 *
010300050614      *            *              * non CAD of the same currency       *
010400050614      *            *              *                                    *
010500050614      * M.Howorth  *  1998/04/28  * RFS #????                          *
010600050614      *            *              * - Modifications to increase the    *
010700050614      *            *              *   number of PAC Account Assignment *
010800050614      *            *              *   records being stored from 15 to  *
010900050614      *            *              *   25.                              *
011000050614      * R.HOLLANDER*  1998/05/27  * RFS #????                          *
011100050614      *            *              * - Changes to switch logic so that  *
011200050614      *            *              *   a 'mock switch' is done before   *
011300050614      *            *              *   actualy processing switch.  This *
011400050614      *            *              *   is done so that we can make sure *
011500050614      *            *              *   the proceeds are large enough to *
011600050614      *            *              *   buy units in the target fund. New*
011700050614      *            *              *   rejection code '50'
011800050614      * R.HOLLANDER*  1998/05/27  * RFS #2600                          *
011900050614      *            *              * - Changes to supress dsc for MLA   *
012000050614      *            *              *   when contr/redem code is 'IFPAY' *
012100050614      * R.HOLLANDER*  1998/08/10  * - Fix - when tax rate is over 49.9%*
012200050614      *            *              *   on gross-up                      *
012300050614      *            *              * - when generating int txn - check  *
012400050614      *            *              *   to make sure it does not use     *
012500050614      *            *              *   existing txn id.                 *
012600050614      *            *              * - Fix - when switch out rejects    *
012700050614      *            *              *   do not bother with switch in edit*
012800050614      *            *              *   Switch out reject code being lost*
012900050614      * R.HOLLANDER*  1998/08/14  * RFS #2838                          *
013000050614      *            *              * - Fix - when a dsc distribution    *
013100050614      *            *              *   switch to charge occurs on a cash*
013200050614      *            *              *   distrib and no free units exist  *
013300050614      *            *              *   a charge is incurred in error on *
013400050614      *            *              *   the distribution - fixed in cpdsc*
013500050614      * R.HOLLANDER*  1998/09/03  * RFS #3101                          *
013600050614      *            *              *   Process LBR Sponsored funds      *
013700050614      *            *              *   PHASE I - No clawback calculation*
013800050614      * R.HOLLANDER*  1998/10/29  *                                    *
013900050614      *            *              *   Process LBR Sponsored funds      *
014000050614      *            *              *   PHASE II  CLAWBACK CALCULATION   *
014100050614      *            *              *   Rewrite grossup routines
014200050614      *            *              *   using a binary estimate
014300050614      * R.HOLLANDER*  1998/11/03  *                                    *
014400050614      *            *              *   Fix tax calulations where tax rate
014500050614      *            *              *   went to 2 digits after the decimal
014600050614      *            *              *   positons - RFS 3358
014700050614      * R.HOLLANDER*  1998/11/26  *                                    *
014800050614      *            *              *   SEG FUND CONTRACT EDITS
014900050614      *            *              *   AND CONTRACT UNIT POSTING
015000050614      *            *              *   SEG FUND MULT PASS
015100050614      * R.HOLLANDER*  1999/01/07  *                                    *
015200050614      *            *              *   For generated int transactions   *
015300050614      *            *              *   blank out the payment type code  *
015400050614      *            *              *   RFS 3312                         *
015500050614      * R.HOLLANDER*  1999/03/11  *                                    *
015600050614      *            *              *   Additional tax logic             *
015700050614      * R.HOLLANDER*  1999/03/11  *                                    *
015800050614      *            *              *   GST and PST calculation on FEE   *
015900050614      *            *              *   transactions                     *
016000050614      * R.HOLLANDER*  1999/03/11  *                                    *
016100050614      *            *              *   Maint:  Add rollback routine     *
016200050614      *            *              *   to undo CDSC and LSIF record     *
016300050614      *            *              *   in the event of insufficient     *
016400050614      *            *              *   units error                      *
016500050614      * R.HOLLANDER*  1999/04/09  *                                    *
016600050614      *            *              *   Change binary estimation rtn     *
016700050614      *            *              *   to minimize the amount of tax    *
016800050614      *            *              *   paid - RFS 4284                  *
016900050614      * R.HOLLANDER*  1999/04/09  *                                    *
017000050614      *            *              *   Change get current routine       *
017100050614      *            *              *   to not allow net unit redemption *
017200050614      *            *              *   RFS 4279                         *
017300050614      * R.HOLLANDER*  1999/04/09  *                                    *
017400050614      *            *              *   Maint:  Efficiency changes       *
017500050614      *            *              *   to only perform necessary rtns   *
017600190227      *            *              *   eg LSIF, DAF                     *
017700050614      * R.HOLLANDER*  1999/04/19  * RFS #????                          *
017800050614      *            *              *   ADD A CALCULATOR WORK FILE       *
017900050614      *            *              *   FOR THE DSC CALCULATOR           *
018000050614      * R.HOLLANDER*  1999/05/27  * RFS #4150                          *
018100050614      *            *              *   Apply GST/PST to the fee portion *
018200050614      *            *              *   of a redemption                  *
018300050614      * R.HOLLANDER*  1999/05/27  * RFS #4016                          *
018400050614      *            *              *   Change DAF logic to apply to a   *
018500050614      *            *              *   new file and apply to int txn as *
018600050614      *            *              *   well                             *
018700050614      * R.HOLLANDER*  1999/08/04  * RFS ?????                          *
018800050614      *            *              *   Change GST and PST logic to use  *
018900050614      *            *              *   investor address for lookup DJT  *
019000050614      * R.HOLLANDER*  1999/08/04  * RFS ?????                          *
019100050614      *            *              *   Change for aic to not do any     *
019200050614      *            *              *   processing for cash distr on BE  *
019300050614      * R.HOLLANDER*  1999/08/17  * RFS ?????                          *
019400050614      *            *              *   For ATLAS - estimate rtn not     *
019500050614      *            *              *   recognizing dlr paid cdsc        *
019600050614      * R.HOLLANDER*  1999/10/19  * RFS 5588                           *
019700050614      *            *              *   Assignments not to be created    *
019800050614      *            *              *   for PAC where end date <= current*
019900050614      *            *              *   process date
020000050614      * R.HOLLANDER*  1999/10/19  * RFS 4685                           *
020100050614      *            *              *   Remove audit log entries for     *
020200050614      *            *              *   PAC assignments                  *
020300050614      * R.HOLLANDER*  1999/11/22  * RFS 5185                           *
020400050614      *            *              *   Fix to include INT if txn placed *
020500050614      *            *              *   for UNITS is equiv to ALL        *
020600050614      * R.HOLLANDER*  1999/11/23  * RFS 5846                           *
020700050614      *            *              *   Fix to PAC assignments with future
020800050614      *            *              *   date                             *
020900050614      * A.Aydogdu  *  1999/11/04  * RFS 4708                           *
021000050614      *            *              * Process SAJ CNS transaction        *
021100050614      * A.Aydogdu  *  1999/11/30  * RFS 5438                           *
021200050614      *            *              * Addition of net/gross indicator    *
021300050614      *            *              * for fee transaction                *
021400050614      * A.Aydogdu  *  2000/01/18  * RFS 6259                           *
021500050614      *            *              * Add ADE to AIC specific mods       *
021600050614      * R.HOLLANDER*  2000/01/31  * 5798 - DSC Calculator - Fix to
021700050614      *            *              * copy book CPDSC - WS-PASS-CDSC
021800050614      *            *              * -CALCULATOR-HOLD check if "C" or ""
021900050614      * Daisy Ly   *  2000/02/03  * RFS 4442 - calculate the           *
022000050614      *            *              *  lsif clawback amount if the
022100050614      *            *              *  province & federal have different
022200050614      *            *              *  waive indicator
022300050614      *            *              *
022400050614      * R.Hollander*  2000/03/10  * Efficiency changes: RFS6646
022500050614      *                           *
022600050614      *                           * Driver pgm for multiple instances
022700050614      *                           * of this program.  Change reads to
022800050614      *                           * 'WITH NO LOCK'.  Receive input
022900050614      *                           * from a DATA Q
023000050614      *                           *
023100050614      *                           * Change DSC copy book to stop
023200050614      *                           * performing DSC liability rts for
023300050614      *                           * clients other than ATLAS
023400050614      *                           *
023500050614      *                           * Recreate this program as an ILE
023600050614      *                           * program
023700050614      *                           *
023800050614      *                           * Read control file at the start,keep
023900050614      *                           * as a counter.
024000050614      *                           *
024100050614      * R.Hollander*  2000/05/02  * RFS 6708
024200050614      *                           * Systematic money markets changed
024300050614      *                           * to use control code INT#
024400050614      * R.Hollander*  2000/06/26  * RFS 6507
024500050614      *                           * OGF modifications to allow redem
024600050614      *                           * fee by household value
024700050614      * A.Aydogdu  *  2000/07/31  * RFS 7539
024800050614      *                           * Change notional distribution flag
024900050614      *                           * only for distribution transactions
025000050614      * A.Aydogdu  *  2000/08/01  * RFS
025100050614      *                           * Change WRITE-GIC-TRANS-RELATIONSHIP
025200050614      *                           * flag to 'W',process all backdated
025300050614      *                           * INT transactions pass CHQ check
025400050614      * Daisy Ly   *  2000/08/15  * RFS 7593 - item #2
025500050614      *            *              * Bypass certificate check for GIC
025600050614      *            *              * transfer-in trade with pass mode H
025700050614      *            *              * because the certificate will create
025800050614      *            *              * in GMATUPD(QTP) once the
025900050614      *            *              * transfer-in trade is post
026000050614      *            *  2000/08/23  * RFS 6785 - FOR ADBI
026100050614      *            *              * add TRANS-ORIGIN-CODE OF ITX
026200050614      * R.Hollander*  2000/09/12  * RFS 7152
026300050614      *                           * Nike modifications to calc a fixed
026400050614      *                           * redemption fee
026500050614      * R.Hollander*  2000/09/12  * RFS 6958
026600050614      *                           * GST and PST not charged on fees
026700050614      *                           * placed gross fix
026800050614      * R.Hollander*  2000/09/12  * RFS 7277
026900050614      *                           * Do not check assignments for
027000050614      *                           * SAJ txns origin CNS
027100050614      * R.Hollander*  2000/09/12  * RFS 7804
027200050614      *                           * Do not check assignments for
027300050614      *                           * TRO txns origin GIM
027400050614      * R. Salire  *  2000/09/22  * RFS 7585
027500050614      *                           * Add new mode "V" for processing
027600050614      *                           * of Advisory Fee transactions
027700050614      * A. Aydogdu *  2000/10/13  * RFS 7858
027800050614      *                           * Update closing reason code of
027900050614      *                           * GIC certificate
028000050614      * R.Hollander*  2000/10/23  * RFS 4637
028100050614      *                           * Logic for Capital Loss
028200050614      *                           * Logic for allocation of distrib
028300050614      *                           * units across seg fund contracts
028400050614      * A. Aydogdu *  2000/10/24  * RFS 7911
028500050614      *                           * Move "N" to CAPITAL-GAIN-DISTR-OPT
028600050614      *                           * if DII
028700050614      * Daisy Ly   *  2000/10/24  * RFS 8095
028800050614      *                           * Add new mode 'J' for maturity
028900050614      *                           * interest adjustment and 'L' for
029000050614      *                           * maturity interest adjustment
029100050614      *                           * re-purchase
029200050614      * R.Hollander*  2000/11/07  * RFS 7441
029300050614      *                           * In CDSC routines only move trade
029400050614      *                           * date to age date if it is zero
029500050614      *                           * Change copy book CPDSLCK3
029600050614      * R.Hollander*  2000/11/28  * RFS 7947
029700050614      *                           * Edit dealer prov license  against
029800050614      *                           * account contract if edit code is
029900050614      *                           * set
030000050614      * R.Hollander*  2000/11/29  * RFS 7390
030100050614      *                           * For GIC if contr-redem rule is X
030200050614      *                           * then for all share - create int
030300050614      *                           * transaction with zero $,
030400050614      *                           * suppress statement, suppress conf
030500050614      * Marc B.    *  2000/11/30  * RFS 4637
030600050614      *                           * If a segfund input is an
030700050614      *                           * interest transaction, an
030800050614      *                           * ACCOUNT-CONTRACT-INV-DIST-BAL
030900050614      *                           * record will be created for each
031000050614      *                           * contract with calculated percentage
031100050614      * R.Hollander*  2000/11/30  * RFS 7446
031200050614      * Dino Dervic*              * If a segfund edit logic
031300050614      * R.Hollander*  2000/11/30  * RFS 8419
031400050614      *                           * For NIKE redemption fee modification
031500050614      *                           * do not calculate this for TRO Trans
031600050614      * R.Hollander*  2000/12/11  * RFS 8470
031700050614      *                           * GIC cutoff date logic changes
031800050614      *                           * GIC 'INT/CHQ' on maturity date
031900050614      *                           * processing
032000050614      * Daisy Ly   *  2000/12/08  * RFS 8464
032100050614      *            *  2000/12/05  * Ayfer - only calculate penalty &
032200050614      *            *              * replacement amt if mode C (CDSC)
032300050614      *            *  2000/12/14  * Daisy - calculate penality &
032400050614      *            *              * replacement amt all the time and
032500050614      *            *              * save the original gross amt
032600050614      * R.Hollander*  2000/12/15  * RFS 8751
032700050614      *                           * Fix PAc index initialize problems
032800050614      * Daisy Ly   *  2000/12/21  * RFS 8470 - GIC
032900050614      *                           * Don't calculate the penalty amt
033000050614      *                           * if the process-date-9 greater than
033100050614      *                           * maturity-date  and is place as full
033200050614      *                           * redemption (all unit for a cert)
033300050614      * A.Aydogdu  *  2000/12/21  * RFS 8467
033400050614      *                           * Display GIC accrued int on DSC
033500050614      *                           * calculator (deduction code GICI)
033600050614      * Marc B.    *  2001/01/04  * RFS 8414
033700050614      *                           * Do not add full redemption
033800050614      *                           * interest to forward dated AWD.
033900050614      * R.HOLLANDER*  2001/01/18  * RFS 9092
034000050614      *                           * Check to see if edit code is set
034100050614      *                           * to ignore dlr rep license expiry
034200050614      *                           * date if investment of the same
034300050614      *                           * structure exists
034400050614      * Lev O.     *  2001/01/22  * RFS 8690
034500050614      *                           * Problem: purchase transactions
034600050614      *                           * randomly did not deduct the sponsor
034700050614      *                           * fee and/or front-end-commission.
034800050614      *                           * Solution: fix the problem.
034900050614      * R Salire   *  2001/01/18  * RFS 7924
035000050614      *            *              * Restrict number of resets allowed
035100050614      *            *              * at investment level.
035200050614      * Lev O.     *  2001/01/30  * RFS 7652
035300050614      *                           * For DII investment and
035400050614      *                           * trade-date = last date of the year
035500050614      *                           * do not generate rejection code.
035600050614      * R.Hollander*  2001/02/13  * RFS 7390
035700050614      *                           * Amend so that closing reason code
035800050614      *                           * is 'TRO' for transfer out
035900050614      * R.Hollander*  2001/01/18  * RFS 9365
036000050614      *                           * Fix for 9092 - if dlr rep license
036100050614      *                           * does not exist still edit
036200050614      * Daisy Ly   *  2001/02/23  * RFS 9277 - Add interest amount
036300050614      *            *              *  in the account-financial file
036400050614      *            *  2001/03/06  * RFS 7390 - Don't calculate penalty
036500050614      *            *              *  & replacement amt for
036600050614      *            *              *  contr-redem-code-rule = 40
036700050614      * Daisy Ly   *  2001/03/08  * RFS 9365 - Initial file
036800050614      *            *              *  DEALER-REP-PROV-LICENSE
036900050614      * Lev O.     *  2001/03/28  * RFS 8517
037000050614      *                           * Unitrax calculate incorrectly
037100050614      *                           * gross-amount for placed-net SELL.
037200050614      *                           * Solution: correct logic to
037300050614      *                           * concider the result, based
037400050614      *                           * on WITHDROWAL-TAX table, is
037500050614      *                           * final.
037600050614      * Reece Tam  *  2001/03/28  * RFS 9346 - Add RESP financial
037700050614      *            *              * update for GIC.
037800050614      * Daisy Ly   *  2001/04/05  * RFS 9982 - update AVERAGE-UNIT-COST
037900050614      *            *              *  of account-investment to 1.000
038000050614      *            *              *  for GID & DII funds
038100050614      * Lev O.     *  2001/04/06  * RFS 10008
038200050614      *                           * Keep linkage data and restore it
038300050614      *                           * with additional data after the
038400050614      *                           * next call INTCLC program.
038500050614      * Ping Fan   *  2001/04/11  * RFS 9964                           *
038600050614      *            *              * Add TAI to AIC specific mods.      *
038700050614      * R MIGUEL   *  2001/04/16  * RFS 10080 - Initialize Dealer Prov
038800050614      *            *              * License and continue to create
038900050614      *            *              * Account Contract records.
039000050614      *            *              * Change the Call to TRNANNAG program.
039100050614      * R Salire   *  2001/05/16  * RFS 10313  Recompile only.
039200050614      * R MIGUEL   *  2001/05/17  * RFS 9860 - Recompile only.
039300050614      * Lev O.     *  2001/05/22  * RFS 9991
039400050614      *            *              * Allow transaction coded
039500050614      *            *              * TRO, SWO not to trigger Redemption
039600050614      *            *              * fee 1%.
039700050614      * Ping Fan   *  2001/05/10  * RFS 9859 Retrofit of new function code
039800050614      *            *              * with existing investment - structure
039900050614      *            *              *  functionality.
040000050614      *            *              *
040100050614      * Lev        *  2001/06/06  * RFS10351
040200050614      *            *              * for GICs the DSC/Sell calculator
040300050614      *            *              * should be able to calculate net
040400050614      *            *              * redemptions up to the current
040500050614      *            *              * business day.
040600050614      *            *              * (i.e. where trade date = process da
040700050614      *            *              * te + 1).
040800050614      *            *              *
040900050614      * Lev O.     *  2001/04/11  * RFS 8897
041000050614      *                           * After an asset allocation rebalance
041100050614      *                           * units remain in the phantom invest-
041200050614      *                           * ment.
041300050614      *                           * Solution: fix logic in rounding
041400050614      *                           * differences on asset allocation
041500050614      *                           * transactions.
041600050614      *            *              *
041700050614      *            *              *
041800050614      * Lev        *  2001/06/12  * RFS10618
041900050614      *            *              * for GICs the DSC/Sell calculator
042000050614      *            *              * Certificate-Status-Date should be
042100050614      *            *              * updated when the Certifcate-Status
042200050614      *            *              * changed.
042300050614      * Reece Tam  *  2001/06/15  * RFS 9830 - Add origin code 'FCP'
042400050614      *            *              * for Foreign Content Penalty,
042500050614      *            *              * similiar to 'FCR'.
042600050614      *            *              *
042700050614      *            *              *
042800050614      * Lev        *  2001/06/22  * RFS10636
042900050614      *            *              * Gic Interest Adjustment after      *
043000050614      *            *              * Maturity should not change         *
043100050614      *            *              * CURRENT-CERTIFICATE-BALANCE.       *
043200050614
043300050614      * Lev        *  2001/06/18  * RFS9530
043400050614      *            *              * Process SWI to GIC/DII from MF
043500050614      *            *              * at the Process Date = Trade Date.
043600050614      *            *              * Use new SWI# for GIC/DII
043700050614      *R.Hollander *  2001/07/05  * RFS 8058 - Dollar dsc changes
043800050614      *            *              *          - Variable PCT Free change
043900050614      *R.Hollander *  2001/07/06  * RFS 10575- Update RRIF/LLIF Details
044000050614      *            *              *
044100050614      * Lev O.     *  2001/07/09  * RFS 9932
044200050614      *            *              * 1.For GIC investment -
044300050614      *            *              * Modify system to create "pending"
044400050614      *            *              * AW* transactions prior to payment
044500050614      *            *              * date. The pending transactions
044600050614      *            *              * should have status "CHQ".
044700050614      *            *              * 2. For DII investment compare
044800050614      *            *              * process-date to WS-UPPER-LIMIT date
044900050614      * Penny H.   *  2001/07/09  * RFS 9996 code removed.
045000050614      * Daisy Ly   *  2001/07/13  * by pass lif/rrif update
045100050614      * B Mitchell *  2001/07/23  * RFS 10974 - Recompile
045200050614      * G Peterson *  2001/08/07  * RFS 10472 - Recompile
045300050614      *            *              *
045400050614      *  Lev O.    * 2001/07/23   * RFS10737
045500050614      *            *              * Return balance for Certificate
045600050614      *            *              * Change Linkage to INTCLC
045700050614      * Ralph H.   * 2001/08/15   * RFS11171
045800050614      *                             Dollar DSC additional fixes.
045900050614      * R MIGUEL   * 2001/08/15   * RFS 10635
046000050614      *            *              * Fix GIC to post transactions
046100050614      *            *              * without NR tax if investor is
046200050614      *            *              * from outside of "CAN" and
046300050614      *            *              * depending on the GIC term.
046400050614      *            *              * Fix the Wire Order Sell transaction
046500050614      *            *              * with Account assignments.
046600050614      *            *              *
046700050614      *            *              *
046800050614      * Lev O.     * 2001/07/20   * RFS11236,
046900050614      *            * 2001/07/17   * ADH2916, TLC, Acceptance, MSGW
047000050614      *            *              * No data in ACCOUNT-CONTRACT file
047100050614      *            *              *
047200050614      * Ralph H.   * 2001/08/28   * RFS11318
047300050614      *                             Dollar DSC additional fixes.
047400050614      * (LEV         2001/08/29 - Added RFS11318 to every next version)
047500050614      *
047600050614      * Ralph H.   * 2001/08/28   * RFS11311
047700050614      *                             Curr unit bal on DSC fix
047800050614      *                             for when prorate = "Y"
047900050614      * (LEV         2001/08/29 - Added RFS11311 to every next version)
048000050614      *            *              *
048100050614      * Lev O.     * 2001/08/14   * RFS10040
048200050614      *            *              * Process unique commissions and
048300050614      *            *              * service fee
048400050614      *            *              *
048500050614      * Lev O.     * 2001/09/06   * RFS11306
048600050614      *            *              * Update Account-rrif-lif only when
048700050614      *            *              * transaction status is HST.
048800050614      *            *              *
048900050614      * R Salire   * 2001/08/20   * RFS 7720
049000050614      *            *              * Added new mode 'T' to process
049100050614      *            *              * SEG Reset Transfer transactions.
049200050614      *            *              *
049300050614      * Lev O.     * 2001/09/27   * RFS11631
049400050614      *            *              * For future AWD do not reject
049500050614      *            *              * transaction on insufficient units.
049600050614      *            *              *
049700050614      * Lev O.     * 2001/10/04   * RFS10608
049800050614      *            *              * Processing Original Value and Age
049900050614      *            *              * date from
050000050614      *            *              * TRANS-CDSC-ORIGINAL-DETAILS file.
050100050614      *            *              * (Changes made in TRNPST and
050200050614      *            *              * CPDSCLCK5)
050300050614      *            *              *
050400050614      * Lev        * 2001/10/12   * RFS11838 Remove condition for
050500050614      *            *              * reading INVESTMENT-TYPE-RULE,
050600050614      *            *              * because in some cases it could
050700050614      *            *              * be not reset.
050800050614      *            *              *
050900050614      * Lev        * 2001/10/23   * RFS11813 Fix Problem:
051000050614      *            *              * Doubling Closing-unit-bal
051100050614      *            *              * when doing SWO from GIC to DII at
051200050614      *            *              * maturity.
051300050614      *            *              *
051400050614      * Geeta      * 2001/10/23   * RFS11835 Recompile only
051500050614      * KM. Yap    * 2001/10/25   * RFS11944 Recompile due to file changes
051600050614      *Dino Dervic *  2001/10/24  * RFS 7721 - Added allowable switch limit
051700050614      *                           * functionality. Code marked with the RFS 7721
051800050614      *            * 2001/11/27   * Added additional changes for the same RFS to
051900050614      *            *              * fix net amount calculation.
052000050614      *            *              *
052100050614      * Lev        * 2001/11/01   * RFS11984 Fix Problem (Side effect
052200050614      *            *              * of the RFS11813): TRI on-line
052300050614      *            *              * (renewal) do not update Initial
052400050614      *            *              * Amount and Balance Value at
052500050614      *            *              * Maturity.
052600050614      *            *              *
052700050614      * Lev        * 2001/11/06   * RFS12041 (Continuing RFS10608)
052800050614      *            *              * When Original-value = 0, then
052900050614      *            *              * do not calculate Unit-Price base
053000050614      *            *              * on this Original-value (in
053100050614      *            *              * CPDSCLCK5)
053200050614      *            *              *
053300050614      * Ralph H    * 2001/11/12   * RFS11905
053400050614      * (Lev entered comment)     * Changes to the DSC calculator for
053500050614      *            *              * for Account Level
053600050614      *            *              *
053700050614      * Lev        * 2001/11/16   * RFS11964
053800050614      *            *              * Changes was made to found
053900050614      *            *              * (if exists) correct interest
054000050614      *            *              * record with TRANS-STATUS-CODE = CHQ
054100050614      *            *              * (if exists) in TRANS file.
054200050614      *            *              *
054300050614      * Lev        * 2001/11/22   * RFS11194 (GIC only)
054400050614      *            *              * Changes was made to refer to
054500050614      *            *              * Interest Adjustment file to adjust
054600050614      *            *              * the interest before posting
054700050614      *            *              * interest transaction.
054800050614      * Marc B.    * 2001/11/27   * RFS 12084 - Do not consider
054900050614      *            *              * assigned units when posting a
055000050614      *            *              * wire order sell
055100050614      *            *              * (Level 88 UNCONFIRMED).
055200050614      *            *              *
055300050614      * R MIGUEL   * 2001/12/05   * RFS 11850 - Move Closing unit bal
055400050614      *            *              * of Account Investment to Trans.
055500050614      *            *              * Capital loss(CPL) logic.
055600050614      * Lev        * 2001/11/30   * RFS10655
055700050614      *            *              * Changes was made to calculate
055800050614      *            *              * and update correctly
055900050614      *            *              * PROCESSED-DOLLAR-AMT of
056000050614      *            *              * BATCH-HEADER
056100050614      * Daisy Ly   * 2001/12/06   * RFS11900-use province of agreement
056200050614      *            *              * of the account to get
056300050614      *            *              * contract-maturity-age
056400050614      * R SALIRE   * 2001/12/14   * RFS12346- RECOMPILE
056500050614      * McGarvey   * 2001/12/19   * RFS 12217(part of 11677) recompile
056600050614      *R.Hollander * 2002/01/14   * RFS8066 Phase 2 of Standard Life
056700050614      *            *              * DSC changes (Account based)
056800050614      *R.Hollander * 2002/01/14   * RFS10826 Commission Recovery
056900050614      * R SALIRE   * 2002/01/14   * RFS11286- TRANSACTIONS ARE REJECTING
057000050614      *            *              * FOR REJECTION CODE '58'.
057100050614      * R MIGUEL   * 2002/01/17   * RFS 12261 - Non-resident tax
057200050614      *            *              * calculation for GIC's at maturity.
057300050614      * Jane D.    * 2002/01/25   * RFS 12409 - Initialized the UPESPFN
057400050614      *            *              * AREA-BUFFER instead of spaces, to
057500050614      *            *              * resolve the MSGW for GIC Trans caused
057600050614      *            *              * by Decimal Data Error.
057700050614      * John M     * 2002/02/07   * RFS 12754 - Recompile only
057800050614      *            *              *
057900050614      * SHU YIN    *  2002/02/22  * RFS 12649: Changed MFDEAMDP TO
058000050614      *            *              *                    MFADEAMDP.
058100050614      *            *              *
058200050614      *R.Hollander * 2002/02/08   * Additional Fixes for RFS8058 and
058300050614      *                           * RFS10826
058400050614      *R.Hollander * 2002/02/26   * Additional Fixes for RFS8058 and
058500050614      *                           * RFS10826
058600050614      *R.Hollander * 2002/02/28   * Additional Fixes for RFS8058 and
058700050614      *                           * RFS10826
058800050614      *R.Hollander * 2002/03/12   * RFS 13282 Copy book CPDSCLCK5 chg.
058900050614      * Marc B.    * 2002/03/15   * RFS 13213 - Revert back to moving
059000050614      *            *              * SETTLEMENT-AMT instead of GROSS-AMT
059100050614      * Marc B.    * 2002/03/15   * RFS 13258 - Use WS-UPPER-LIMIT-DATE
059200050614      *            *              * instead of PROCESS-DATE.
059300050614      * Daisy Ly   *  2002/03/20  *  RFS 13185 - recompile
059400050614      * Fatema Haji*  2002/03/21  *  RFS 13331 - recompile
059500050614      *R.Hollander * 2002/03/12   * RFS 13364 Copy book CPDSCLCK5 chg.
059600050614      * Lev        * 2002/03/22   * RFS12271 -
059700050614      *            *              * Problem: Creating CDSC transaction
059800050614      *            *              * with zeroes for Adjustments.
059900050614      *            *              * Solution: Use regular flow for
060000050614      *            *              * adjustments when Updating files.
060100050614      * Lev        * 2002/03/25   * RFS11025 -
060200050614      *            *              * (Related to RFS10040)
060300050614      *            *              * Include all transaction types
060400050614      *            *              * in Process unique commissions and
060500050614      *            *              * service fee   calculation.
060600050614      *R.Hollander * 2002/04/03   * RFS 13405 Bug fix for Dollar DSC
060700050614      *                           * Gross up routines
060800050614      * Daisy Ly   *  2002/04/05  *  RFS 13467 - recompile
060900050614      *            *              *
061000050614      * Lev O.     *  2002/04/22  * RFS13471 - Problem:
061100050614      *            *              * When an FEE transaction
061200050614      *            *              * is processed to an AA fund the
061300050614      *            *              * transaction remains pending after
061400050614      *            *              * the daily.
061500050614      *            *              * Solution: Change validation logic
061600050614      *            *              * for this type transaction and
061700050614      *            *              * Change linkage to
061800050614      *            *              * CHKDOLLDSC (authorization for
061900050614      *            *              * MGMFEE).
062000050614      * Marc B.    *  2002/04/23  * RFS 13182/13441 - Reinitialize
062100050614      *            *              * switch limit fee variable so
062200050614      *            *              * that it is only applied to the
062300050614      *            *              * currently processed transaction.
062400050614      * Lev O      * 2002/04/25   * RFS12308 - do not reject with "Insu
062500050614      *            *              * fficient unit balance" Switches
062600050614      *            *              * from GIC to DII for  certificate
062700050614      *            *              * with Capital Payment Option "D"
062800050614      *            *              * and assignments on the Account.
062900050614      * Marc B.    *  2002/04/29  * RFS 13176 - Move proper value to
063000050614      *            *              * key when retrieving file
063100050614      *            *              * CONTRACT-MATURITY-AGE.
063200050614      *            *              *
063300050614      * Lev O      * 2002/05/21   * RFS12420 - Changing in Estimate-
063400050614      *                           * Gross up routines to minimize
063500050614      *                           * Withholding Tax.
063600050614      *            *              *
063700050614      **R. Hollander  2002/05/24  * Percent Free treated as dollars
063800050614      *            *              * RFS 13468
063900050614      *            *              *
064000050614      * Lev O      * 2002/06/07   * RFS13383 - For switch and transfer
064100050614      *            *              * transactions make 2 full passes
064200050614      *                           * for a small gross/net/units.
064300050614      *                           *
064400050614      * Marc B.    *  2002/06/24  * RFS 13743 - Waive switch limit fee
064500050614      *            *              * if transaction reversal code is
064600050614      *            *              * linked to Reversal Rule '3'.
064700050614      * Marc B.    *  2002/06/24  * RFS 13998 - Relocated perform of
064800050614      *            *              * switch fee calculation routine so
064900050614      *            *              * that the gross-amt will be
065000050614      *            *              * calculated first.
065100050614      * Daisy Ly.  *  2002/07/09  * RFS 14266 - recompile for
065200050614      *            *              * trans-commission (MFATRNCMP)
065300050614      *            *              *
065400050614      * Lev        *  2002/07/05  * RFS10352,
065500050614      *            *              * RFS13839 - support multiply
065600050614      *            *              * Account-Investments for DSC
065700050614      *            *              * calculator.
065800050614      * Marc B.    *  2002/07/24  * RFS 13587 - Advisory fee for
065900050614      *            *              * asset allocation holding fund was
066000050614      *            *              * previously able to skip rejection
066100050614      *            *              * logic if special module authority
066200050614      *            *              * "MGMFEE" was installed (RFS 13471).
066300050614      *            *              * Now rejection can ALSO be skipped
066400050614      *            *              * "ADJFEES" authority is installed.
066500050614      * R Salire   *  2002/08/07  * RFS 14600 - Recompile
066600050614      * Mona N.    * 2002/09/06   * RFS12563 - Recompile only
066700050614      * Fatema Haji* 2002/10/30   * RFS 15384 - Recompile for     *
066800050614      *             *              * TRANS-BUY-LSIF                *
066900050614      * Marc B.    * 2002/07/31   * RFS 13130 - No longer add accrued
067000050614      *            *              * interest to full redemption of
067100050614      *            *              * forward dated AWD.
067200050614      * Marc B.    * 2002/08/21   * RFS 13148 - When SEG switch is
067300050614      *            *              * within 1 account, we will keep in
067400050614      *            *              * the same contract if compatible.
067500050614      *            *              * (Line tags merged under RFS 13306).
067600050614      * Marc B.    * 2002/08/21   * RFS 13306 - When SEG switch is
067700050614      *            *              * across 2 accounts, we evaluate the
067800050614      *            *              * new contract flag to decide if old
067900050614      *            *              * logic - or many to many contracts.
068000050614      * Lev        *  2002/09/10  * RFS14591 - In some cases the
068100050614      *            *              * program is looping in estimate-
068200050614      *            *              * gross-amount for the placed net
068300050614      *            *              * sell. (The problem is related to
068400050614      *            *              * RFS12420 changes). Fix the problem.
068500050614      * Mona N.    * 2002/09/06   * RFS14845 - Recompile only
068600050614      *            *              *
068700050614      * Lev        *  2002/09/25  * RFS14975 - Correct rounding for
068800050614      *            *              * free dollars.
068900050614      * Lev        *  2002/10/10  * RFS14898 - 1. Skip
069000050614      *            *              * CALCULATE-REDEMPTION-CDSC when
069100050614      *            *              * Switch/transfer was done to the
069200050614      *            *              * same account/investment.
069300050614      *            *              * 2. Fix rounding problem in
069400050614      *            *              * CALCULATE-REDEMPTION-CDSC.
069500050614      * Lev        *  2002/10/29  * RFS15194 - Free dollars used
069600050614      *            *              * involved in calculation Free
069700050614      *            *              * dollars and should be rounded
069800050614      *            *              * to two decimal places.
069900050614      *            *              * (RFS14898, RFS14975, RFS15194 are
070000050614      *            *              * related to each other)
070100050614      * Marc B.    * 2002/10/25   * RFS 15561 - Modified file
070200050614      *            *              * description for file
070300050614      *            *              * TRANS-CONTRACT-DETAILS to point
070400050614      *            *              * to proper index (was previously
070500050614      *            *              * MFATRCODLA- now MFATRCODP.
070600050614      * Lev        * 2002/11/14   * RFS14169 - Correct multi-currency
070700050614      *            *              * free dollar calculation
070800050614      *            *              * (in CPDSCLCK5)
070900050614      * Marc B.    * 2002/11/18   * RFS14738 - Forgive missing licence
071000050614      *            *              * for dealer and/or rep if TRNDRP
071100050614      *            *              * function is present within env.
071200050614      * Marc B.    * 2002/11/27   * RFS 15656 - Reset variables which
071300050614      *            *              * determine if segfund related files
071400050614      *            *              * are written within RECORD-UPDATES
071500050614      *            *              * section.
071600050614      * Marc B.    * 2002/12/02   * RFS 15719 - Allow Account Contract
071700050614      *            *              * Investment array to both write and
071800050614      *            *              * rewrite - as opposed to only one
071900050614      *            *              * allowable mode.
072000050614      * R.Hollander*  2002/10/24  * RFS14090 -
072100050614      *(Sources    *              * For Account-lev-dsc process ,
072200050614      * changed by *              * Switch transactions with specific
072300050614      * Lev O)     *              * guidelines changes made in
072400050614      *            *              * processing ACCOUNT-LEVEL-FREE file,
072500050614      *            *              * to place original record to this
072600050614      *            *              * file.
072700050614      * Marc B.    * 2002/12/13   * RFS15658 - Determine and update new
072800050614      *            *              * field FOREIGN-CONTENT-ELIGIBLE in
072900050614      *            *              * file TRANS-BUY-LSIF-PRIMARY.
073000050614      * Lev        * 2003/01/06   * RFS15841 - Problem:Gross amount is
073100050614      *            *              * overriden by total interest
073200050614      *            *              * generated for non-resident investor
073300050614      *            *              * (Related to changes in RFS12261)
073400050614      *            *              * Solution: fix the problem - use
073500050614      *            *              * NR value (gross, net) to calc Tax.
073600050614      * Lev        *  2003/01/10  * RFS16051 - Porblem with numbers
073700050614      *            *              * with big precision while calculatin
073800050614      *            *              * g free units.
073900050614      *            *              * Solution : make precision smaller.
074000050614      * Marc B.    * 2002/12/22   * RFS 15847 - Segfund contract
074100050614      *            *              * validation will evaluate redemption
074200050614      *            *              * and purchase logic during
074300050614      *            *              * VALIDATE-TRADE section.
074400050614      * Marc B.    * 2003/01/13   * RFS 16060 - Segfund contract
074500050614      *            *              * validation will not perform
074600050614      *            *              * RFS 15847 logic if BUY transaction.
074700050614      * Marc B.    * 2003/01/14   * RFS 16054 - Segfund SELL will
074800050614      *            *              * loop section PROCESS-SEG-SELL
074900050614      *            *              * through multiple contracts until
075000050614      *            *              * WS-SEG-UNITS-REDUCE equals zero.
075100050614      * Marc B.    * 2003/01/24   * RFS 16245 - Industry fund code and
075200050614      *            *              * Unit Price are repopulated in TRANS
075300050614      *            *              * record after SEG fund validation.
075400050614      * Marc B.    * 2003/01/24   * RFS 16229 - Allow SEG fund switches
075500050614      *            *              * to perform SEG switch IN logic in
075600050614      *            *              * non-validation mode before the
075700050614      *            *              * RECORD-UPDATES section.
075800050614      * Lev        *  2003/01/31  * RFS14879 - problem from AIC:
075900050614      *            *              * Unable gross up net. Changed
076000050614      *            *              * Estimate Gross Amount section to
076100050614      *            *              * round intermediate result.
076200050614      *            *              *
076300050614      * Lev        * 2003/02/10   * RFS15425 - Problem:
076400050614      *            *              * GICINTGEN and forward AWD DII are
076500050614      *            *              * causing the total processed
076600050614      *            *              * transaction not to match with
076700050614      *            *              * number of transaction entered.
076800050614      *            *              * Solution:  make consistent change
076900050614      *            *              * to History and Update batch for
077000050614      *            *              * future AWD and GIC interest
077100050614      *            *              * transactions.
077200050614      * Marc B.    * 2003/02/11   * RFS 16445 - Ensure the flag
077300050614      *            *              * WS-SEG-OUT-PROCESSED-FLAG is set to
077400050614      *            *              * 'N' for SELL and SWO transactions.
077500050614      * Marc B.    * 2003/02/13   * RFS 13829 - If no ACIDB record
077600050614      *            *              * created on RECORD-DATE, a new
077700050614      *            *              * record will be created to allot
077800050614      *            *              * 100% of the distribution to the
077900050614      *            *              * contract associated to the
078000050614      *            *              * distribution transaction.
078100050614      * Marc B.    * 2003/02/24   * RFS 16571 - Recompile for RFS16381.
078200050614      * Marc B.    * 2003/02/24   * RFS 16522 - Allow asset allocation
078300050614      *            *              * transactions to process within mode
078400050614      *            *              * 'U' when certain conditions exist.
078500050614      * Lev        * 2003/02/26   * RFS 16480 - Recompile for RFS 16435
078600050614      * Marc B.    * 2003/03/17   * RFS 15723 - Create multiple Segfund
078700050614      *            *              * contracts in reverse order based on
078800050614      *            *              * incremental contract number. Also,
078900050614      *            *              * moved reset of WS-SEG-OUT-PROCESSED
079000050614      *            *              * from Detail Processing section into
079100050614      *            *              * Get Current Record to ensure that
079200050614      *            *              * flag is properly reset before any
079300050614      *            *              * validation.
079400050614      * Marc B.    * 2003/03/28   * RFS 16873 - Recompile only
079500050614      * Marc B.    * 2003/03/28   * RFS 16844 - Add GROSS-AMT to 2 new
079600050614      *            *              * fields added to files ACCOUNT-RRIF
079700050614      *            *              * & ACCOUNT-LIF.
079800050614      * Marc B.    * 2003/03/25   * RFS 16812 - Segfund switches from
079900050614      *            *              * a non-seg into seg fund should be
080000050614      *            *              * directed towards code containing
080100050614      *            *              * traditional segfund SWI logic.
080200050614      * NGUYEN A.  * 2003/04/17   * RFS 16384 - Modify to also perform
080300050614      *            *              * Calculate-GIC-Deduction for DII
080400050614      *            *              * Investment. To initialize MFATRGIDP
080500050614      *            *              * file if GIC Investment. To check
080600050614      *            *              * product-type-rule for the deduction
080700050614      *            *              * code 'GICI' and 'DIII'.
080800050614      * Lev O.     * 2003/04/21   * RFS16693 - Problem: DSC calculator
080900050614      *            *              * is not taking into account Certific
081000050614      *            *              * ate units while calculating DSC the
081100050614      *            *              * flag Cert&Assigned Units = "Y".
081200050614      *            *              * Solution: fix the bug.
081300050614      * Marc B.    * 2003/04/03   * RFS 16760 - (Master RFS 15623).
081400050614      *            *              * LSIF rewrite of waive codes and
081500050614      *            *              * tax parm retrieval. New file:
081600050614      *            *              * INVESTMENT-LSIF-JURISDICTIONS.
081700050614      *            *              * Also, new split option code 'N'.
081800050614      *            *              * Rewrite of logic which exhausts
081900050614      *            *              * units from TRANS-LSIF-BUY file.
082000050614      * Marc B.    * 2003/05/07   * RFS 16919 - (Master RFS 15623).
082100050614      *            *              * LSIF Rollover logic added.
082200050614      *            *              * This logic is executed during an
082300050614      *            *              * LSIF SWO/SWI.
082400050614      *            *              * 1) Reject SWO/SWI transactions
082500050614      *            *              *    with product type 'LBS' if not
082600050614      *            *              *    LSIF Rollover.
082700050614      * Marc B.    * 2003/05/20   * RFS 17417 - Recompile only.
082800050614      * Marc B.    * 2003/05/16   * RFS 16454 - If calculated contract
082900050614      *            *              * maturity date is February 29th of
083000050614      *            *              * a non-valid leap year (Segfunds),
083100050614      *            *              * then the calculated date will be
083200050614      *            *              * replaced with March 1rst instead.
083300050614      * Reece Tam  * 2003/06/05   * RFS 17117 - Allow trades that are
083400050614      *            *              * placed directly on holding funds to
083500050614      *            *              * bypass Trans Asset Alloc Header,
083600050614      *            *              * Asset Allocation Header, and
083700050614      *            *              * Trans Allocation Pointer files in
083800050614      *            *              * Validate Trade and Populate
083900050614      *            *              * Inheritance Amounts sections.
084000050614      * Lev O.     * 2003/06/24   * RFS17778 - Recompile for the file  "
084100050614      *            *              * changes (ASSET-ALLOCTION-HEADER    "
084200050614      *            *              * and TRANS-ASSET-ALLOC-HEADER)
084300050614      * Lev O.     * 2003/05/14   * RFS16505 - Calculate DSC chargeable
084400050614      *            *              * first.
084500050614      * Marc B.    * 2003/05/21   * RFS 17019 - New mode 'B' to process
084600050614      *            *              * only Systematic Fee transactions.
084700050614      *            *              * Also, check Special Module Author.
084800050614      *            *              * to see if 'MFEAMS' is populated, if
084900050614      *            *              * so, bypass check of entire account
085000050614      *            *              * field on account assignment.
085100050614      * Marc B.    * 2003/06/16   * RFS 16941 - Switches between
085200050614      *            *              * different environments logic added.
085300050614      * Marc B.    * 2003/07/28   * RFS 18191 - Accomodate new fields
085400050614      *            *              * in file LSIF-TAX-CREDIT-PARMS and
085500050614      *            *              * INVESTMENT-LSIF-JURISDICTIONS. Also
085600050614      *            *              * new logic in status fields in files
085700050614      *            *              * TRANS-BUY-LSIF/TRANS-SELL-LSIF.
085800050614      * Lev O.     * 2003/08/01   * RFS18128 - Problem: Not   calculati
085900050614      *            *              * ng properly Gross Amount for
086000050614      *            *              * fee transactions.
086100050614      *            *              * Solution: restored logic to calc
086200050614      *            *              * gross amt for the fee transactions.
086300050614      * Jane D.    * 2003/08/05   * RFS 16152 - unit amt not being cal-
086400050614      *            *              * culated properly for AWD of DIIs
086500050614      *            *              * when AWD amount equal the unit-bal
086600050614      *            *              * of account investment
086700050614      * Lev O.     * 2003/08/22   * RFS14710 -
086800050614      *            *              * 1. Allow trading on Holding
086900050614      *            *              * (No phantom)
087000050614      *            *              * 2. Implement new functionality:
087100050614      *            *              * have only one active phantom in
087200050614      *            *              * account
087300050614      *            * 2003/09/02   * RFS14710 - fixed problems, related
087400050614      *            *              * to this RFS.
087500050614      * Marc B.    * 2003/09/02   * RFS 18486 - Instead of writing
087600050614      *            *              * TRANS-BUY-LSIF, read with same key
087700050614      *            *              * to see if record already created by
087800050614      *            *              * RFS 18447 (original buys only).
087900050614      *            *              * Also, populate TRANS-BUY-LSIF
088000050614      *            *              * (for transfers) with country/prov.
088100050614      *            *              * of Investor if not available from
088200050614      *            *              * Buy being exhausted for SWO/TRO.
088300050614      *            * 2003/09/03   * RFS14710 - fixed problems, related
088400050614      *            *              * to this RFS.
088500050614      * Marc B.    * 2003/09/03   * RFS 16941 - Additional 2 line mod
088600050614      *            *              * on file open commands.
088700050614      * Marc B.    * 2003/09/05   * RFS 18540 - Removed references
088800050614      *            *              * to 4 fields removed from dictionary
088900050614      *            *              * (File: TRANS-BUY-LSIF)
089000050614      * Lev O.     * 2003/09/11   * RFS17180 - changes to maintain
089100050614      *            *              * one active phantom in account.
089200050614      *            *              * one active phantom in account.
089300050614      *            * 2003/09/17   * Continuing RFS17180
089400050614      *            * 2003/09/18   * Continuing RFS17180
089500050614      * Marc B.    * 2003/09/12   * RFS18486 - Removed several lines
089600050614      *            *              * which were no longer required.
089700050614      * Truong Le  * 2003/09/16   * RFS18486 -
089800050614      *            *              * 1. Include condition check for
089900050614      *            *              * status of history conversion in
090000050614      *            *              * VALIDATE-LSIF-SPECIFIC-TX-ID section.
090100050614      *            *              * 2. Modified LSIF-STATUS related condition.
090200050614      * Dino Dervic* 2003/09/23   * RFS 18705 - Added changes marked with RFS #
090300050614      *                           * to fix several bugs reported in the RFS
090400050614      *            * 2003/10/02   * RFS 18781 - Added changes marked with RFS #
090500050614      *                           * to fix several bugs reported in the RFS
090600050614      * Chandana R.* 2003/10/07   * RFS 18781 - Added changes to fix the calc.
090700050614      *                           * of PRV CLWBCK & FED CLWBCK amounts.
090800050614      * Bharti M   * 2003/09/08   * RFS 16613 - If there are any CPL
090900050614      *            *              * transactions attached to Wire order
091000050614      *            *              * that is not in 'HST' status then
091100050614      *            *              * issue 'OTR still outstanding' error
091200050614      *            *              * message for CPL transaction and
091300050614      *            *              * only change status to 'HST' when
091400050614      *            *              * the attached wire order is 'HST'
091500050614      * Marc B.    * 2003/09/24   * RFS 18686 - Calculate segfund units
091600050614      *            *              * switches between contracts based on
091700050614      *            *              * %OUT vs. %IN, instead of converting
091800050614      *            *              * to $$ as a common denominator.
091900050614      * Chandana R.* 2003/10/21   * RFS 19063 - Changed the VALIDATE-LSIF-SPEC
092000050614      *                           * IFIC-TX-ID routine to use the correct file
092100050614      *                           * when validating the LSIF status code.
092200050614      * Chandana R.* 2003/10/24   * RFS 19110 - Do not validate the both federal
092300050614      *                           * and provincial INVESTMENT-LSIF-JURISDICTIONS
092400050614      *                           * for regular transfers.
092500050614      * Chandana R.* 2003/10/14   * RFS 18781 - Changed the CREATE-TRANS-SELL-
092600050614      *                           * LSIF routine to use the TBL array fields
092700050614      *                           * instead of working storage fields.
092800050614      * Marc B.    * 2003/09/29   * RFS 14380 - Introduction of
092900050614      *            *              * Early Redemption Fee logic.
093000050614      *            * 2003/010/01  * RFS 14380 - Made changes to
093100050614      * Marc B.    *              * special module authorization logic.
093200050614      * Bharti M   * 2003/09/22   * RFS 18672 - Setting up 'DIR' for
093300050614      *            *              * TRANS-ORIGIN-CODE when the process
093400050614      *            *              * mode is 'C' Calculator.
093500050614      * Lev O      * 2003/09/29   * Made the changes for RFS18672.
093600050614      * Jane D.    * 2003/09/08   * RFS 15584 - Initialized rate field
093700050614      *            *              * of Trans-charges.
093800050614      * Marc B.    * 2003/10/17   * RFS 14380 - Made modification in
093900050614      *            *              * the ESTIMATE-GROSS-AMT section to
094000050614      *            *              * fix a problem with PLACED-AS-NET.
094100050614      *            *              * when calculating Early Redemption.
094200050614      *            *              * fee.
094300050614      * Marc B.    * 2003/10/21   * RFS 14380 - Made modification in
094400050614      *            *              * the INITIAL-LOGIC section to open
094500050614      *            *              * the TRANS-ERF-PURCHASE file for
094600050614      *            *              * read-only so it would not lock
094700050614      *            *              * records which cannot update.
094800050614      * Marc B.    * 2003/10/21   * RFS 14380 - 2 line change to stop
094900050614      *            *              * ERF charge on origin code FCP/FCR.
095000050614      * Marc B.    * 2003/10/24   * RFS 14380 - Added line to force
095100050614      *            *              * all transactions - which are not
095200050614      *            *              * SWO/SELL - to avoid charging ERF.
095300050614      * Marc B.    * 2003/10/25   * RFS 14380 - Must populate TEP
095400050614      *            *              * file with ACCOUNT/INV of TRANS -
095500050614      *            *              * not original BUY. Also populate
095600050614      *            *              * TRADE-DATE with carry-over date
095700050614      *            *              * when ERF not charge.
095800050614      * Marc B.    * 2003/10/27   * RFS 14380 - New requirement to
095900050614      *            *              * not charge on transactions which
096000050614      *            *              * have CONTR-REDEM-CODE = "MRGO".
096100050614      * Marc B.    * 2003/10/27   * RFS 14380 - Now that zero rate
096200050614      *            *              * is allowed on ERF rate schedule,
096300050614      *            *              * we have to avoid dividing by zero,
096400050614      *            *              * so if zero rate, I hardcode a
096500050614      *            *              * zero charge and avoid formula w/
096600050614      *            *              * possible division with zero.
096700050614      * Lev O.     * 2003/11/06   * RFS19210 - fix bug, related to
096800050614      *            *              * RFS14710: identify and work with
096900050614      *            *              * active phantom in account.
097000050614      * Lev O.     * 2003/11/07   * RFS19210 - Continuing...
097100050614      * Lev O.     * 2003/11/10   * RFS19210 - Continuing...
097200050614      * Lev O.     * 2003/11/12   * RFS17813 - only for the base curren
097300050614      *            *              * cy read Exchange-Rate table.
097400050614      * Lev O.     * 2003/11/17   * RFS17466 - Change the program to
097500050614      *            *              * calculate interest in calculator
097600050614      *            *              * mode when gross ammount equal to
097700050614      *            *              * CURRENT-CERTIFICATE-BALANCE.
097800050614      * Lev O.     * 2003/11/18   * RFS18779 - use contr-redem-code-rul
097900050614      *            *              * e instead of using contr-redem-code
098000050614      * Lev O.     * 2003/11/27   * RFS19430 - use original LSIF
098100050614      *            *              * Status while looking through TBL
098200050614      *            *              * array.
098300050614      *            * 2003/12/04   * Continuing ...
098400050614      * Lev O      * 2003/12/15   * RFS19685 - TRNPST is
098500050614      *            *              * updating Segfund contracts
098600050614      *            *              * with negative units.
098700050614      *            *              * Solution: verified RFS19058 changes
098800050614      * Marc B.    * 2003/12/15   * RFS 19058 - This RFS resolves three
098900050614      * Marc B.    * 2003/12/15   * RFS 19058 - This RFS resolves three
099000050614      *            *              * issues:
099100050614      *            *              * 1) Negative units are being
099200050614      *            *              *    calculated within the
099300050614      *            *              *    ACCOUNT-CONTRACT-INVESTMENT file
099400050614      *            *              *    within the RECORD-UPDATES.
099500050614      *            *              * 2) Seg units should go into an
099600050614      *            *              *    'active' contract if the trade
099700050614      *            *              *    date of the BUY occurred when
099800050614      *            *              *    the contract was still open -
099900050614      *            *              *    even if the contract is active
100000050614      *            *              *    when the BUY is posted as HST.
100100050614      *            *              * 3) Sponsor fee is not deducted
100200050614      *            *              *    from GROSS-AMT of transaction.
100300050614      * Marc B.    * 2003/10/24   * RFS 19058 - Modified retrieval of
100400050614      *            *              * file CONTRACT-STATUS-SCHED.
100500050614      * Marc B.    * 2003/12/05   * RFS19738 - Disallow any trade from
100600050614      *            *              * being associated to a closed
100700050614      *            *              * Segfund contract.
100800050614      * Marc B.    * 2004/01/21   * RFS19738 - Bug fix found in testing
100900050614      * Bharti M   * 2003/12/09   * RFS 19771 - For SWO transactions
101000050614      *            *              * orginated by ARA process by pass
101100050614      *            *              * account assignment check
101200050614      * Lev O.     * 2003/12/23   * (Changed for RFS19900)
101300050614      * Chandana R.* 2003/12/15   * RFS19900 - Check for insufficient
101400050614      *            *              * unit balance for WOR only when gets
101500050614      *            *              * CON status.
101600050614      * Chandana R * 2003/12/30   * RFS 20200 - Increase the array size
101700050614      *            *              * to 800 in order to process more than
101800050614      *            *              * 150 ERF transactions.
101900050614      * Lev O.     * 2004/01/21   * RFS20333 - Do some fix, related to
102000050614      *            *              * RFS19900 changes.
102100050614      * Brian Lu   * 2004/01/06   * RFS19248 - Recompile only.
102200050614      * Lev O      * 2004/01/21   * Entered the comment
102300050614      * Marc  B.   * 2004/01/06   * RFS19498 - Recompile only.
102400050614      * Lev O      * 2004/01/21   * Entered the comment
102500050614      * Chandana R * 2004/01/13   * RFS 20143 - FEE transactions within
102600050614      *            *              * Locked-In accounts should be able to
102700050614      *            *              * process if the special module auth
102800050614      *            *              * (MFEAMS) is setup.
102900050614      * Lev O      * 2004/01/23   * Added RFS20515 to PKGJAN2004 ver
103000050614      * Chandana R * 2004/01/16   * RFS 20515 - The RATE field in the
103100050614      *            *              * TRANS-TARGET file is not set properly
103200050614      *            *              * for CDSC, DAF, REDF, HRDF, RPTY, GST
103300050614      *            *              * and PST charges.
103400050614      * Marc B.    * 2003/10/09   * RFS 20265 - For BUYs, new logic
103500050614      *            *              * to set contribution date and tax
103600050614      *            *              * year.
103700050614      * Lev O      * 2004/01/19   * RFS 20347 - Recompile only.
103800050614      * C.Lentini  * 2004/01/23   * RFS18568 - Interest Transactions
103900050614      *            *              * reinvesting accrued interest
104000050614      *            *              * regardless of account investment
104100050614      *            *              * distribution & payment setup.
104200050614      * Lev O.     * 2004/02/16   * RFS20263 - Introduce new acc
104300050614      *            *              * separator - "S" (Only one active in
104400050614      *            *              * account and no STF in this accoint)
104500050614      * Chandana R * 2004/02/02   * RFS 17685 - Automate MM interest
104600050614      *            *              * adjustments for backdated trades.
104700050614      * Lev O      * 2004/02/19   * RFS19733 - Include fee charges in
104800050614      *            *              * calculation while processing Net
104900050614      *            *              * switches.
105000050614      * Lev O.     * 2004/02/23   * RFS20883 - Allow to process Asset
105100050614      *            *              * Allocation Buy and sells when
105200050614      *            *              * the flag Generate Trades on
105300050614      *            *              * holdings is ON.
105400050614      * Chandana R * 2004/02/23   * RFS 17685 - Additional changes to
105500050614      *            *              * process MFR transactions.
105600050614      * Chandana R * 2004/03/01   * RFS 17685 - Additional fixes
105700050614      *            *              * related to this RFS.
105800050614      * Chandana R.* 2004/02/23   * RFS21065 - Modified to assign the
105900050614      *            *              * LSIF-STATUS flag correctly.
106000050614      * Lev O.     * 2004/03/02   * RFS5512 - Do pre-pass for the
106100050614      *            *              * trades, originally placed as %;
106200050614      *            *              * Use Remaining Balance Threshold
106300050614      *            *              * from System table to know if Split
106400050614      *            *              * Option Code "U" need to be changed
106500050614      *            *              * to "A".
106600050614      * Lev O.     * 2004/03/31   * RFS20711 - Replaced some logic with
106700050614      *            *              * subprograms.
106800050614      *            *              * - Replaced READ Control-file with
106900050614      *            *              * perform  READ-Control-file.
107000050614      *            *              * Removed:
107100050614      *            *              * - old code related to TESTP3
107200050614      *            *              * - RFS11025 in SET-COMM-RATE
107300050614      *            *              * - commented code in DPR-0000
107400050614      * Chandana R.* 2004/03/15   * RFS20722 - Track the CDSC records
107500050614      *            *              * where the units originated from
107600050614      *            *              * re-invested distributions.
107700050614      * Chandana R.* 2004/04/06   * RFS20311 - Perform validations on
107800050614      *            *              * dealer rep if screen edit codes are
107900050614      *            *              * setup.
108000050614      * C.Lentini  * 2004/03/02   * RFS 21175 - Subtract one from the
108100050614      *            *              * active date calculation for Seg
108200050614      *            *              * contracts.
108300050614      * Lev O.     * 2004/05/03   * RFS22072 - 1.LSIF TRO transactions
108400050614      *            *              * have been rejected because bug in
108500050614      *            *              * code: variable
108600050614      *            *              * WS-SKIP-TRANS-BUY-LSIF-FLAG was not
108700050614      *            *              * set up at every loop.
108800050614      *            *              * 2.Corrected rejection process in
108900050614      *            *              * "PROCESS-SELL" paragraph.
109000050614      * Brian Lu  .* 2004/05/04   * RFS22008 - New logic to reject
109100050614      *            *              * trade if Dealer Rep inactive
109200050614      *            *              * should be bypassed if origin code
109300050614      *            *              * equals 'DCA'. (original RFS 20311)
109400050614      * Lev O.     *  2004/05/05  * RFS21772 - Change the program to   *
109500050614      *            *              * work with new Calculator Mode: "1".*
109600050614      *            *              * In this mode no new files will be  *
109700050614      *            *              * created and updated in QTEMP       *
109800050614      *            *              * Library.                           *
109900050614      *            *              * This mode was designed for INT trn *
110000050614      * Lev O.     *  2004/05/06  * RFS21627 - Re-compile due to the   *
110100050614      *            *              * DSC-CALC-FILE changes.             *
110200050614      * Chandana R.* 2004/05/18   * RFS21625 - Modified to include new
110300050614      *            *              * fields in MFADSCCALP file.
110400050614      * Lev O.     * 2004/05/27   * RFS22180 - Validate transactons for*
110500050614      *            *              * Investment end date.               *
110600050614      * C. LENTINI * 2004/05/12   * RFS18281 - New copybook CPYREJCD
110700050614      *            *              * for rejections.  Bypass any asset
110800050614      *            *              * allocation trades already rejected
110900050614      *            *              * by the AA programs.
111000050614      * Marc B.    * 2004/07/02   * RFS 21253 - Skip LSIF processing
111100050614      *            *              * for notional distributions.
111200050614      * Marc B.    * 2004/07/16   * RFS 23088 - 2 ERF fixes as follows:
111300050614      *            *              * 1) When retrieving the penalty
111400050614      *            *              * rate record - which is based on
111500050614      *            *              * units being redeemed - ensure that
111600050614      *            *              * this record retrieval is based on
111700050614      *            *              * the unit amount of the transaction
111800050614      *            *              * and not on the units being
111900050614      *            *              * exhausted from the original
112000050614      *            *              * purchase record being evaluated.
112100050614      *            *              * 2) Fix error where wrong penalty
112200050614      *            *              * record is being read.
112300050614      * Brian Lu  .* 2004/07/14   * RFS21254 - Calculate Fed clawback
112400050614      *            *              * if LSIF-Status = "P"
112500050614      *            *              * Account with negative net amount,
112600050614      *            *              * the Federal clawback will be
112700050614      *            *              * deducted.
112800050614      * C. LENTINI * 2004/08/13   * RFS21612 - New routine added called
112900050614      *            *              * UPD-ACCOUNT-INVESTMENT to update
113000050614      *            *              * the account investment record
113100050614      *            *              * for the calculator mode.
113200050614      * Lev O.     * 2004/08/20   * Changes done on PKGOCT2004 version.*
113300050614      *            * 2004/06/26   * RFS15626 - Grace period automation.*
113400050614      *            *              * Introduce Grace period and         *
113500050614      *            *              * DSC reduction for Grace Period.    *
113600050614      * Lev O.     * 2004/08/25   * RFS23718 - Re-compile with correct *
113700050614      *            *              * version of copybook (CPDSCLCK5)    *
113800050614      *            *              * which includes RFS21625.           *
113900050614      * C. LENTINI * 2004/09/01   * RFS23020 - New functionality to map
114000050614      *            *              * AAP Phantom distribution and
114100050614      *            *              * payment methods on new account
114200050614      *            *              * investments for AAH Hodings.
114300050614      * B.LU       *  2004/09/22  * RFS24154
114400050614      *            *              * -Recompile for Master RFS23824
114500050614      * Lev O      * 2004/09/15   * RFS24228 - Fix the program not to  *
114600050614      *            *              * update files in
114700050614      *            *              * CALCULATE-REDEMPTION-CDSC routine
114800050614      *            *              * for Calculator Mode if it set up in
114900050614      *            *              * TRNPST.
115000050614      * Chandana R.* 2004/09/08   * RFS23955 - Changes to RFS17685     *
115100050614      *            *              * determination of backdated trade.  *
115200050614      *            *              * Use Process date instead of the    *
115300050614      *            *              * placement date.                    *
115400050614      * Chandana R.* 2004/07/12   * RFS 16590 - New logic to calculate
115500050614      *            *              * and exhaust overcontributed units
115600050614      *            *              * for LSIF redemptions.
115700050614      * Chandana R.* 2004/87/24   * RFS 23433 - Accomodate the missed/
115800050614      *            *              * additional functionlity from 16590.
115900050614      *            *              * - When calculating clawback free
116000050614      *            *              *   redemption units, the partial
116100050614      *            *              *   over-con and partial clawback
116200050614      *            *              *   chrg units should be taken into
116300050614      *            *              *   consideration.
116400050614      *            *              * - Remove the mini loop that process
116500050614      *            *              *   the distrib units first.
116600050614      * Reece Tam  * 2004/09/20   * RFS24112 - Include 'M' and 'T' in  *
116700050614      *            *              * PLACED-IN-UNITS for mature units   *
116800050614      *            *              * and total free units due to units  *
116900050614      *            *              * are already determined, and avoid  *
117000050614      *            *              * incorrect calculation of Unit Amt  *
117100050614      *            *              * in CALCULATE-UNITS-TRANSACTED sect.*
117200050614      * C. LENTINI * 2004/10/06   * RFS23802 - Changes to ensure the
117300050614      *            *              * active phantom in account is
117400050614      *            *              * deleted for all unit redemptions.
117500050614      * Chandana R.* 2004/10/15   * RFS23477
117600050614      *            *              * When creating multiple records in
117700050614      *            *              * TRANS-ERF-PURCHASE for a TRI or
117800050614      *            *              * SWI, ensure that the unit total of
117900050614      *            *              * these multiple records exactly
118000050614      *            *              * matches the unit amount of the
118100050614      *            *              * TRI/SWI transaction.
118200050614      * C. LENTINI * 2004/11/11   * RFS25053 - Add HSC to level 88
118300050614      *            *              * field HISTORY for DSC calculator.
118400050614      * Chandana R.* 2004/11/11   * RFS 25060
118500050614      *            *              * For switches, if the schedule
118600050614      *            *              * code is "B" then the ERF-APPLICABLE
118700050614      *            *              * flag should be set to "Y".
118800050614      * Chandana R.* 2004/12/01   * RFS 25358
118900050614      *            *              * Modified the program to not pick up
119000050614      *            *              * the grace period days for prov lvl
119100050614      *            *              * when trying to determine the fed
119200050614      *            *              * clawback free eligibility. Instead
119300050614      *            *              * the federal grace days should be
119400050614      *            *              * retrived and compared against.
119500050614      * Chandana R.* 2004/11/30   * RFS 24145
119600050614      *            *              * Changed the program to process MFR
119700050614      *            *              * transaction without going into a
119800050614      *            *              * MSGW. MFRs should be processed the
119900050614      *            *              * same way as notional distributions.
120000050614      * Lev O      * 2004/09/15   * RFS25821 - Make sure to delete     *
120100050614      *            *              * Active phantom if Current Unit Bal
120200050614      *            *              * = 0.0 . (Related  to RFS23802)
120300050614      * Bharti M   *  2004/12/24  * RFS 25606  Recompile only.
120400050614      *            *              *
120500050614      * Lev O      * 2005/01/26   * Only added RFS21875
120600050614      * Chandana R.* 2004/12/21   * RFS21875 Fixed the following LSIF
120700050614      *            *              * issues.
120800050614      *            *              * 1) TRO/SWO/ROLLOVER processed to HST
120900050614      *            *              * and the TSLP records are not created
121000050614      *            *              * and TBLP records are not updated.
121100050614      *            *              * 2) TRO/SWO/ROLLOVER processed to HST
121200050614      *            *              * and the offsetting transaction stay
121300050614      *            *              * pending due a rejection and no
121400050614      *            *              * rejection code is assigned.
121500050614      * Lev O.     * 2005/01/26   * Added RFS21258 to PKGJAN2005       *
121600050614      * Lev O.     * 2005/01/13   * RFS21258 - Increase initial range  *
121700050614      *            *              * while doing Gross Up Net - it need *
121800050614      *            *              * to be done for the trades when     *
121900050614      *            *              * charges is up to 90%.              *
122000050614      *            * 2005/01/13   * Allow to pass "Unable Gross up net"*
122100050614      *            *              * when some conditions apply.        *
122200050614      * Chandana R.* 2005/01/19   * RFS 26243
122300050614      *            *              * Retrieve the FORM-REQUEST-CONTR-REDEM
122400050614      *            *              * file records based on the LSIF-STATUS
122500050614      *            *              * of the original TRANS-BUY-LSIF.
122600050614      * Chandana R.* 2005/01/14   * RFS 26114
122700050614      *            *              * Fixed problems related to retrieval
122800050614      *            *              * and calculation of maximums related
122900050614      *            *              * to clawback.
123000050614      * Chandana R *  2005/01/11  * RFS 24922  Set the ERF-APPLICABLE
123100050614      *            *              * flag based on the value entered on
123200050614      *            *              * the TRNBADJ screen.
123300050614      * C.LENTINI  * 2005/01/27   * RFS 26376 Retrieve the original    *
123400050614      *            *              * unit price of LSIF purchase in     *
123500050614      *            *              * Over Contribution Calc. logic.     *
123600050614      * C. LENTINI * 2004/11/11   * RFS20811 - Add program comments
123700050614      *            *              * to ensure ERF changes are applied
123800050614      *            *              * to the GENERFRC program.
123900050614      * Reece Tam  * 2005/02/16   * RFS23617 - Fix SWI/TRI into a
124000050614      *            *              * Closed contract for SEG.
124100050614      * Chandana R.* 2005/02/17   * RFS26702 Federal grace days are
124200050614      *            *              * used to calculate the provincial
124300050614      *            *              * clawback. Changed the program to
124400050614      *            *              * retrieve and use the provincial
124500050614      *            *              * grace days for provincial calc.
124600050614      * Chandana R.* 2005/02/14   * RFS 26557 Complete re-write of the *
124700050614      *            *              * retrieval/determination of the LSIF*
124800050614      *            *              * status and the contribution date   *
124900050614      *            *              * when processing BUYs, SWIs and     *
125000050614      *            *              * rollover transactions. Also cleaned*
125100050614      *            *              * up the POST-LBR-SPNS-UNITS routine *
125200050614      *            *              * to remove the commneted out code.  *
125300050614      *            *              * Please refer to the archive section*
125400050614      *            *              * in Aldon in case if you want to    *
125500050614      *            *              * refer to this commented out code.  *
125600050614      *            *              * And also the RFS26243 logic in     *
125700050614      *            *              * POST-LBR-SPNS-UNITS routine is     *
125800050614      *            *              * obsolete due the current changes.  *
125900050614      *            *              *                                    *
126000050614      *            *              * Also fixed the following issues    *
126100050614      *            *              * that were discovered internally.   *
126200050614      *            *              * 1) Federal clawback calculation is *
126300050614      *            *              *    wrong if the LSIF Status = "P". *
126400050614      *            *              *    RFS26557X1                      *
126500050614      *            *              * 2) Trade date is used instead of   *
126600050614      *            *              *    the contribution date when      *
126700050614      *            *              *    retrieving the grace period info*
126800050614      *            *              *    RFS26557X2                      *
126900050614      *            *              * 3) Fixed over-contribution calc    *
127000050614      *            *              *    related issues.                 *
127100050614      *            *              *    RFS26557X3                      *
127200050614      * Bharti M   * 2005/03/03   * RFS 26847 Unit Price for ERF Charge*
127300050614      *            *              * calculation should be Unit Price
127400050614      *            *              * from the earliest trans erf purchas
127500050614      *            *              * and not original of that record
127600050614      *            *              * when calculation method is B. Also
127700050614      *            *              * fixed to carry right amount of
127800050614      *            *              * decimal places of Unit Price to
127900050614      *            *              * Erf Purchase File
128000050614      * Waldi R.   * 2005/03/15   * RFS 26972 - Recompile due to the   *
128100050614      *            *              * CPDSCLCK5 copy book changes.
128200050614R27851* L. Wong    * 2005/05/11   * RFS 27851 -Bug Fix- RFS26557
128300050614      *            *              * Trades rejected "L1" for @@@P8
128400050614      *            *              * since Contribution Date was not
128500050614      *            *              * populated before getting LSIF
128600050614      *            *              * jurisdiction logic.
128700050614      * Ewa K.    .* 2005/04/06   * RFS25997 Reject LLP redemptions
128800050614      *            *              * which records exist in MFATLLPXP
128900050614      *            *              * work file. MFATLLPXP is cleared on
129000050614      *            *              * daily bases.
129100050623      * Reece Tam  * 2005/06/09   * RFS 27724 - Fix distribution DSC   *
129200050623      *            *              * rounding issue, and in CPDSCLCK5.
129300050614      * Reece Tam  * 2005/03/31   * RFS26666 - Fix INT reversal problem
129400050614      *            *              * occurs in the current period that
129500050614      *            *              * relates to an all-units redemption.
129600050614      * C. LENTINI * 2005/04/11   * RFS26598 - Waive DSC/ERF for calc.
129700050712      * Frank Hong * 2005/05/17   * RFS 26151.
129800050712      *            *              * Modify the program to calculate the units
129900050712      *            *              * of the Management Fee Rebate transaction
130000050712      *            *              * with Trans Type = 'MFR' in the Trans
130100050712      *            *              * Table (MFATRNP) and populate the Trans
130200050712      *            *              * Contract Details table (MFATRCODP)
130300050729      * Frank Hong * 2005/06/27   * RFS28482
130400050729      *            *              * Distribution transactions should be
130500050729      *            *              * populated with LSIF-STATUS = 'N'.
130600050729      *            *              * They should be treated as Claw Back
130700050729      *            *              * free.
130800050729      *            *              * Tax Year should not be zeros. (bug fix)
130900050817      * Dino Dervic* 2005/07/11   * RFS27050 - Dino Dervic - Added code marked
131000050817      *                           *          with the RFS#.
131100050920R29550* L. Wong    * 2005/08/26   * RFS 29550 - US Withholding Tax
131200050920      *            *              * Special Module USWT.
131300050920      *            *              * Moved change history into new
131400050920      *            *              * copybook - CPYTRNPST.
131500050614      * Marek T.  * 2005/06/13 * RFS 27108 - Recompile only due to    *
131600050614      *           *            * Form Sequence# expansion to 18 bytes.*
131700050614R24191* L. Wong    * 2005/06/09   * RFS 24191 - Apply Inclusion Rate
131800050614      *            *              * on NR tax for Pooled Funds.
131900050614      *            *              * Special Module POLTAX, Edit Code
132000050614      *            *              * IRCPG. MFACOUWTP file expansion.
132100050614R24190* L. Wong    * 2005/06/13   * RFS 24190 - Withholding Tax on
132200050614      *            *              * Pooled Fund redemption.
132300050614      *            *              * Special Module POLTAX, Edit Codes
132400050614      *            *              * NT2062 & NRGSEL.
132500050614      *            *              * Removed commented out codes older
132600050614      *            *              * than 2001. To save space, merged
132700050920      *            *              * some lines.
132800050928R30065* L. Wong    * 2005/09/28   * RFS 30065 - Retrofit for RFS 29550.
132900050929      * Waldi R.   * 2005/07/11   * RFS26905 - Fix for the Ontario
133000050929      *            *              *            Grace Period formula.
133100050929      * Pubudu Jay * 2005/09/07   * RFS28282
133200050929      *            *              * The ACCRUE-ON-BUY-OR-SELL-DAY of
133300050929      *            *              * investment file should be checked
133400050929      *            *              * when End Date of TRANS-INTEREST-
133500050929      *            *              * DETAILS file is populated.
133600051024      * Brian O'C. * 2005/09/28   * RFS27297
133700051024      *            *              * Declaring variables for changes
133800051024      *            *              * made to CPDSCLCK5.
133900051005      * Villamar   * 2005/10/05   * RFS29134
134000051005      *            *              * Add logic to ERF procedure/process
134100051005      *            *              * Determine if ERF calculate is over
134200051005      *            *              * the value entered into new field
134300051005      *            *              * Waive-Threshold-Amt defined into
134400051005      *            *              * table ERF Schedule.
134500051024      * Reece Tam  * 2005/10/06   * RFS 26987 - Increase the range for
134600051024      *            *              * gross up net trade to 98% from 90%
134700051024      *            *              * without rejecting it for error 29.
134800051115      * LEV O      * 2005/10/14   * RFS30320 - FIX THE BUG WHICH WAS
134900051115      *            *              * CAUSED BY RFS13364, COMMISSION
135000051115      *            *              * RECOVERY CHANGES.
135100051115      * Esin A.    * 2005/11/15   * Defect 29134.2 - Fix the bug that
135200051115      *            *              * causes double ERF charges.
135300051115      *            *              * Defect 29134.3 - Fix the bug that
135400051115      *            *              * causes decimal data error.
135500051116      * Esin A.    * 2005/11/16   * Defect 29134.4 - Fix the bug that
135600051116      *            *              * causes no ERF charges.
135700051118      * Waldi R.   * 2005/11/16   * 29134 - Rewritten the whole logic
135800051118      *            *              * for this RFS. For clarity, removed
135900051118      *            *              * all lines releated to defects
136000051118      *            *              * logged against this RFS.
136100051215      * Lev O      * 2005/11/29   * RFS31393 - Fix bug to initialize   *
136200051215      *            *              * some variables used for LSIF       *
136300051215      *            *              * trades.                            *
136400051215      * Lev O      * 2005/12/15   * RFS31393 - retrofited RFS31393 to  *
136500051215      *            *              * archived version, include RFS29134.*
136600060126      * Lev O      * 2005/12/28   * RFS31860 - Problem: Incorrect      *
136700060126      *            *              * Clawback calc-on on Merged funds.  *
136800060126      *            *              * Solution: changes made to check    *
136900060126      *            *              * price change when switching between*
137000060126      *            *              * different funds and calculate      *
137100060126      *            *              * ratio to be applied to the price.  *
137200051220R24192* L. Wong    * 2005/06/15   * RFS 24192 - For reinvested notional
137300051220      *            *              * distributions for non-residents for
137400051220      *            *              * INC/CPG trans, create a new NR Tax
137500051220      *            *              * Sell trans to redeem the units.
137600051220      *            *              * Edit Code NDSNRR.
137700051220      * Ewa K.     * 2005/11/09   * RFS 28651 - Recompile only due to
137800051220      *            *              * MFATRNLD LF change (RVP, AOP)
137900051220      * Reece Tam  * 2005/11/25   * RFS 24192 - Fix the logic that was
138000051220      *            *              * put in June for this RFS to process
138100051220      *            *              * the NDSNRR redemption using similar
138200051220      *            *              * technique as interest generation
138300051220      *            *              * to ensure that NRR trans will get
138400051220      *            *              * process properly and accordingly
138500051220      *            *              * to all existing logic.
138600051221      * Andy Chan  * 2005/12/21   * RFS 27609 - Perform interest adjust
138700051221      *            *              * for MM WOR EC backdated order even
138800051221      *            *              * module MMINTA is off
138900051230      * Pawel A    * 2005/12/30   * RFS 30055 - Reset flag WS-WAIVE-ERF-FLAG
139000051230      *            *              * to 'N' before transaction is checked for
139100051230      *            *              * exemption
139200060116R30095* L. Wong    * 2006/01/16   * RFS30095 - Fix calculation of
139300060116      *            *              * non-resident tax for GIC if
139400060116      *            *              * last interest payment at maturity
139500060116      *            *              * is done manually (online posting).
139600060131      * Geeta S.   * 2006/01/25   * RFS 30134- Validate trading code   *
139700060131      *            *              * and account activity before        *
139800060131      *            *              * processing the transaction.        *
139900060220      * Truong L   * 2006/02/14   * RFS32782 - Initialize the Financial*
140000060220      *            *              * Schedule.                          *
140100060206      * Richard S  * 2006/02/06   * RFS 26260 - Reject SEG distributions
140200060206      *            *              * if no contract exists.
140300060302      * Abdi Hassan* 2006/03/02   * RFS29617 - Recompile only          s
140400060316      * Fatima Y.  * 2006/03/16   * RFS33276 - Recompile only          s
140500060420      * Esin A.    * 2006/03/23   * RFS 31514 - Recompile only         *
140600060420      * Esin A.    * 2006/04/11   * RFS 32479 - Corrected incorrect    *
140700060420      *            *              * clawback amount when a fund merge  *
140800060420      *            *              * occured between a ROIF and         *
140900060420      *            *              * a non-ROIF fund.                   *
141000060428      * L. Wong    * 2006/04/20   * RFS30190 - Recompile for MFATRNREP.
141100060428      *            *              * New parms for FGUSBWHTX.
141200060501      * L. Wong    * 2006/05/01   * RFS32616 - Recompile for MFAINVSCP
141300060503      * Daisy Ly   * 2006/05/01   * RFS34401 - include transaction types
141400060503      *            *              *  when validating trading code
141500060512      * Reece Tam  * 2006/05/08   * RFS31912 - Fix incorrect creation  s
141600060512      *            *              * of orphaned TRANS-CONTRACT-TARGET  s
141700060512      *            *              * records for BUY as per Marc B.     s
141800060724      * T.Valeri   * 2006/05/29   * RFS34924 - Add AIC DSC
141900060724      *            *              * functionality to GGF
142000060531      * Reece Tam  * 2006/05/31   * RFS32519 - Fix NR tax charge to    s
142100060531      *            *              * include all interest payments in   s
142200060531      *            *              * mode 'U'.                          s
142300060616      * Frank Hong * 2006/06/16   * RFS32873.
142400060616      *            *              * Check if the edit code 1ACCON has
142500060616      *            *              * been setup from screen code
142600060616      *            *              * OETRNPST.
142700060724      * Philip Ma  * 2006/06/19   * RFS32964 - Remove redundant
142800060724      *            *              * retrievals of data area MFARESPSP
142900060724      *            *              * by calling UPESPFN rather than
143000060724      *            *              * UPESPFNP.
143100060724      * Lev O      * 2006/06/21   * RFS32873 - recover bonus commission*
143200060724      *            *              * in paid by dealer functionality    *
143300060724      * P. Anielski* 2006/07/06   * RFS35704 - Changes for 30190
143400060724      *            *              * missing from Acceptance August
143500060727      * Bharti M   * 2006/07/20   * RFS 35595 - Recompile for the file
143600060727      *            *              * changes of TRANS-ADDITIONAL-TAX
143700060727      *            *              * (MFATRNATP)
143800060821      * Daisy Ly   * 2006/08/21   * RFS 32873- defect #10
143900060821      *            *              * treat the switch trade as buy/sell
144000060821      *            *              * for BE TO BE AND BE TO LL and
144100060821      *            *              * standard commission = X
144200060823      *            * 2006/08/22   * RFS 32873 - defect #11
144300060823      *            *              * -don't check the commission recovery
144400060823      *            *              *  module when setting
144500060823      *            *              *  lncc_clawbackBEOn and
144600060823      *            *              *  lncc_clawbackLLOn to TRUE
144700060919      * Angela N.  * 2006/07/20   * RFS35045 - Fix to charge a correct
144800060919      *            *              * additional tax amount as specified
144900060919      *            *              * on the additional tax screens where
145000060919      *            *              * the Account Level Withholding Tax
145100060919      *            *              * logic is being used.
145200060918      * L. Wong    * 2006/09/05   * RFS33578 - Add logic for new Quebec
145300060918      *            *              * Withholding Tax for Periodic Pymts
145400060918      *            *              * (AWD) for registered plans.
145500061025      * Lev O      * 2006/10/26   * RFS37712 - Fix defect related to
145600061025      *            *              *   RFS32873; Now place properly
145700061025      *            *              *   BE to LL trades, when account
145800061025      *            *              *   types are different.
145900061219      * Lev O      * 2006/10/30   * RFS38021 - Fix problem - generate
146000061030      *            *              *  commission on SWI side for
146100061030      *            *              * Paid by dealer commission recovery.
146200061219      * Bharti M   * 2006/10/26   * RFS34838 - Recompile.
146300061219      *            *              * MFAACLIFP & MFAACRIFP expanded.
146400061227      * Waldi R.   * 2006/11/03   * RFS 28264 - ERF fixes:
146500061227      *            *              * 1) Waive ERF Charge using ERF Appli-
146600061227      *            *              *    cable flag for BAJ transactions
146700061227      *            *              *    only at the time of PURCHASE
146800061227      *            *              *    (fix to RFS 24922).
146900061227      *            *              * 2) Use ERF Schedule values based on-
147000061227      *            *              *    ERF Schedule Code stored in the
147100061227      *            *              *    array.
147200061106      * Kahkashan P* 2006/11/06   * RFS37770 - Recompile
147300061124      * Lev O      * 2006/11/10   * RFS38021- (retrofiting for Base)
147400061227      *            *              *           Fix problem - generate
147500061124      *            *              *  commission on SWI side for
147600061124      *            *              * Paid by dealer commission recovery.
147700061219      * Marek T.   * 2006/11/16   * RFS 32914 - Withholding tax calc.
147800061219      *            *              *  incorrectly on some transactions.
147900061219      *            *              *  When Gross amount was estimated
148000061219      *            *              *  from NET placed trade, formula
148100061219      *            *              *  did not pick up the lower possible
148200061219      *            *              *  amount, but the higher estimated
148300061219      *            *              *  amount in some cases.
148400061227      * Shu Yin    * 2006/11/22   * RFS 37427 - If AAP/STF separator set
148500061219      *            *              * to A or S, reject MFR phantom trans
148600061219      *            *              * if the account investment is not
148700061219      *            *              * active.
148800070108      * Shu Yin    * 2006/11/30   * RFS36451 - Fixed MSGW in TRNPST by
148900070108      *            *              * initializing MFAFINSCP of
149000070108      *            *              * FINANCER-SCHEDULE-REC and
149100070108      *            *              * FINANCER-SCHEDULE-REC-2.
149200061212      * Lev O      * 2006/12/12   * RFS38704- fix TRNPST problems:
149300061212      *            *              * 1.Initialize working storage vars
149400061212      *            *              * 2.Skip rejection in non-update
149500061219      *            *              * mode.
149600061219      * Marek T.   * 2006/12/18   * RFS 39003 - Long runtime for
149700061219      *            *              *  Jobdaily ACC/TST. Fix estimate    -
149800061219      *            *              *  Gross amount:                     -
149900061219      *            *              *  1.When $ amount replaces          -
150000061219      *            *              *    Withholding Tax Rates.          -
150100061219      *            *              *  2. For Fee trades when Tax Rate   -
150200061219      *            *              *     is from different table.       -
150300070126      * Andy L.    * 2007/01/23   * RFS 35717 - Fix free unit bug in
150400070126      *            *              *             AIC for all redemption.-
150500070126      *            *              *             Recompile due to change
150600070126      *            *              *             in CPDSCLCK5.
150700070129      * Fatema Haji* 2007/01/18   * RFS35865 - Added a new mode 'E' to
150800070129      *            *              * process AOT trades before the
150900070129      *            *              * distribution run so the units of
151000070129      *            *              * the trade would be included in the
151100070129      *            *              * record day balance.
151200070123      * L. Wong    * 2007/01/23   * RFS36325 - Declare variable for new
151300070123      *            *              * Lessor of Book or Market CDSC
151400070123      *            *              * Calculation logic (in CPDSCLCK5).
151500070205      * Lev O      * 2007/01/23   * RFS32409 - did changes for SOA, -
151600070205      *            *              * special call from SP.
151700070205      *            *              * 1. For non-account level DSC: no
151800070205      *            *              *   file updates.
151900070205      *            *              * 2. For acc level - qtemp files are
152000070205      *            *              *   updated (no change for acc level).
152100070320      * Lev O      * 2007/03/19   * RFS40891 - Implementation Only:
152200070320      *            *              *   checked out for acc level
152300070320      *            *              *   for client testing.
152400070326      * Raymond Mui* 2007/03/20   * RFS 40362 - 'J' Clawback code
152500070326      *            *              *  incorrectly applied to SEL.
152600070402      * Lev O      * 2007/04/02   * RFS40418 - Multithreading problem:
152700070402      *            *              *   different records lock same
152800070402      *            *              *   record.
152900070417      * Lev O      * 2007/04/12   * RFS35075 New edit code to accept thetrade
153000070417      *            * 2007/04/17   * if license is expired.
153100070417      *            *              *
153200070412      * Lev O      * 2007/04/12   * RFS39005- fix TRNPST problems:
153300070412      *            *              *   negative unit price and units
153400070412      *            *              *   have been created for the
153500070412      *            *              *   switches.
153600070423      * Daisy Ly   * 2007/04/12   * RFS37754-chk special module SEGSYSMAT
153700070423      *            *              * 1. Bypass investment check for
153800070423      *            *              *  CPG trade with origin code 'MAT'
153900070423      *            *              * 2. Bypass rep licene for MAT trade
154000070423      *            *              *  without commission
154100070509      * Lev O      * 2007/05/09   * RFS31294 - fixed bug: switch was
154200070509      *            *              * rejected with error code 29 -
154300070509      *            *              * unable gross up net.
154400070515      *            *              * Changed the program not to reject the
154500070509      *            *              * trade if differences is less some
154600070515      *            *              * small amount. Based on the provided
154700070515      *            *              * example 0.01 will make the trade to
154800070515      *            *              * pass the calculation. I set it up to
154900070515      *            *              * 0.02 just to make it safe and not to
155000070515      *            *              * come up as issue in the future.
155100070517      * Lev O      * 2007/05/17   * RFS38531 - fixed bug: in some sircum
155200070517      *            *              * stances age days was not calculated
155300070517      *            *              * and old values have been used from
155400070517      *            *              * working storage variable. This happen
155500070517      *            *              * for switches only and when unit
155600070517      *            *              * movement indicator =  T.
155700070517      *            *              * The problem happen only for
155800070517      *            *              * Account level Dsc client (ex: Std life).
155900070517      *            *              * The fix is on CPDSCLCK5 copybook.
156000070528      * Lev O      * 2007/05/28   * RFS42286 - fixed bug: for distributions
156100070528      *            *              *  in some scenarious last transction
156200070528      *            *              *  end up with negative value and this
156300070528      *            *              *  is wrong.Make changes not to come
156400070528      *            *              *  negative for CPP distributions.
156500070606      * Lev O      * 2007/05/28   * RFS42286.1-fix defect; Now do not apply
156600070606      *            *              *  RFS42286 changes if there is negative
156700070606      *            *              *  units in TRANS-CDSC-PURCHASE file.
156800070606      *            *              * (TRNPST could not fix this, after data
156900070606      *            *              * fix TRNPST Will work properly and will
157000070606      *            *              * genereate negative units)
157100070704      * Lev O      * 2007/05/21   * RFS42622 - added code to have new
157200070704      *            *              * financer, age date for IP Maturity
157300070704      *            *              * switch trade.
157400070704      * Lev O      * 2007/07/04   * RFS42622 - retrofited the rfs
157500070724      * Lev O      * 2007/07/24   * RFS43082 - added code to get new
157600070724      *            *              * rate (continuing RFS38531).
157700070727      * Lev O      * 2007/07/27   * RFS43082 - Removed RFS42621 and RFS43334
157800070727      *            *              *   for ACC install.
157900070730      * Lev O      * 2007/07/30   * RFS42621 - Retrofit RFS42621.
158000070730      * Marek T    * 2007/07/25   * RFS43334 - Validated maturity
158100070730      *            *              * transactions reject on locked in
158200070730      *            *              * accounts.
158300070730      * Lev O      * 2007/07/30   * RFS43334 - Retrofited the rfs
158400070814      * Lorne B    * 2007/06/25   * RFS 42682-eGL Extract; recompile
158500070914      * Esin A     * 2007/06/15   * RFS43469 - Phase2 IP Maturity
158600070914      * Frank Hong * 2007/08/20   * RFS39466.
158700070914      *            *              * If difference between available
158800070914      *            *              * units and calculated unit amount
158900070914      *            *              * is -0.001, redeem all available
159000070914      *            *              * units.
159100070827      * Esin A.    * 2007/08/27   * RFS 33712-Addition of split option
159200070827      *            *              * 'T' within the ERF process.
159300071009      * Lev O      * 2007/10/02   * RFS35909 - for MFR trades which placed
159400071009      *            *              *   when current unit balance = 0.0
159500071009      *            *              *   create new Account contract invest
159600071009      *            *              *   ment record.
159700071009      * Lev O      * 2007/10/04   * RFS35909.1  - Make sure to create
159800071009      *            *              * TRANS-CONTRACT-DETAIL record.
159900071009      *            * 2007/10/09   * Retrofiting changes RFS35909 in
160000071009      *            *              *  correct section(fixing defect 1).
160100071109      * Ade A      * 2007/10/13   * Rfs 42278 Created program          *
160200071109      *            *              * Link Notes Maturity Transactions   *
160300071109      *            *              * Generation                         *
160400071109      * Andy C     * 2007/11/09   * Rfs 45552 Recompile program        *
160500071115      * Marek T    * 2007/11/06   * RFS45131 - Validated DTH
160600071115      *            *              * transactions reject on locked in
160700071115      *            *              * accounts.
160800071127      * Frank Hong * 2007/11/27   * RFS 40942.
160900071127      *            *              * Modify to update GWA amount for
161000071127      *            *              * initial purchases.
161100080102      * Ade Adeyemi* 2008/01/02   * Rfs 46784 Fix the problem where
161200080102      *            *              * NR tax was incorrectly charged on i
161300080102      *            *              * MM distribution transaction for Non
161400080102      *            *              * -Resident Accounts
161500080115      * Frank Hong * 2007/12/31   * RFS45728.
161600080115      *            *              * J Code Issue on LSIF Redemptions
161700080115      *            *              * and Rollovers.
161800080115      * Raymond Mui* 2007/11/27   * RFS45845 - Recompile
161900080115      * M. Anwar   * 2007/12/18   * RFS45805 - Recompile for MFAACIVMP
162000080115      *            *              * changes.
162100080115      * Emma. Yala * 2008/01/10   * RFS47227 - Recompile
162200080115      * Raymond Mui* 2007/11/27   * RFS45845 - Recompile
162300080115      * Lev O      * 2008/01/04   * RFS45141 - retrofit for interm req.
162400080115      * Lev O      * 2007/12/20   * RFS45141 - SYSAOT batches are not
162500080115      *            *              *   balanced: fix the problem and
162600080115      *            *              *   for SYSAOT do extra-update of the
162700080115      *            *              *   batch-header file.
162800080115      *            * 2007/12/27   * RFS45141.1 - fix defect - program bug:
162900080115      *            *              *  make sure code wrok for Gross/Net/
163000080115      *            *              *  unit trades.
163100080115      * Lev O      * 2008/01/04   * RFS46365 - Retire client specific code
163200080115      *            *              *   (ATL) for LIABILITY-SUPPORT and
163300080115      *            *              *   CLOCK-SUPPORT .
163400080115      * Lev O      * 2008/01/09   * remove RFS46962 for ACC IR.
163500080131      * Lev O      * 2008/01/18   * added  RFS46962 for ACC IR.
163600080115      * Lev O      * 2007/12/21   * RFS46125 - provide functionality for
163700080115      *            *              * BE to BE switch on death claims:
163800080115      *            *              * 1.Set up new financer on SWI side
163900080115      *            *              * 2.Calculate CDSC charges for SWO
164000080115      *            *              *   trade.
164100080115      * Lev O      * 2008/01/10   * RFS46125 - Re-applied the rfs and
164200080115      *            *              * fix defects.
164300080115      * Ade Adeyemi* 2008/01/10   * Rfs 47251.1 Fix the problem where
164400080115      *            *              * YTD-MINIMUM-PAID is being updated
164500080115      *            *              * for rule 77 in ACCRIF detail screen
164600080115      *            *              * and ACCLIF detail screen
164700080117      * Lev O      * 2008/01/09   * RFS44611 - as per ESG standard
164800080117      *            *              * percent placed trade should not
164900080117      *            *              * include Contracted units.
165000080117      * Lev O      * 2008/01/17   * RFS44611 - retrofited the rfs.
165100080131      * Lev O      * 2008/01/07   * RFS46962 - 1.Fix bug in estimate
165200080131      *            *              * gross amount routine: program come
165300080131      *            *              * to loop for some net placed values.
165400080131      *            *              * 2.Reject trade if not able to get
165500080131      *            *              * appropriate gross for the net amount.
165600080208      * Lev O      * 2008/02/08   * RFS47712 - Recompile for MFATRNCPP
165700080222      * Ade Adeyemi* 2008/02/08   * Rfs 47816 NR tax is not being applied
165800080222      *            *              * on non registered nominee accounts
165900080228      * Lev O      * 2008/01/28   * RFS46125 - BE to BE on death claims
166000080228      *            *              *   should be processed as sell and buy
166100080228      *            *              *   with commission on sell side.
166200080228      * Frank Hong * 2008/01/22   * RFS44930.
166300080228      *            *              * Changes for 5FL products.
166400080307      * Richard S  * 2008/03/07   * RFS44930 - retrofit
166500080307      *            *              * Removed 43677 changes for ACC intrm
166600080307      * R Miguel   * 2007/12/14   * RFS 43677 - Change the way NR tax
166700080307      *            *              * is charged on the Link Note Maturity
166800080307      *            *              * redemption.
166900080307      *            *              * Additional reqt's were added.
167000080317      * Lev O      * 2008/03/05   * RFS48390 - make sure to close SYSAOT
167100080317      *            * 2008/03/17   *   batches for SWI trades.
167200080319      * Emma Yala  * 2008/03/19   * RFS45781 - Enhacement to the Invest
167300080319      *            *              * minimum functionality validation
167400080401      * Angela N   * 2008/03/20   * RFS 45991 - Fixed the problem for
167500080401      *            *              * Net YTD Total Paid on ACCRIF/ACCLIF
167600080401      *            *              * was being updated incorrectly.
167700080404      * Lev O      * 2008/04/03   * Modification for the RFS45991
167800080401      * Shu Yin    * 2008/04/01   * 45781.22 - Changed value of
167900080401      *            *              * lc_NotWaiveFlag from "N" to " "
168000080408      * Pawel A.   *  2008/03/24  * RFS 45519 - Recompile only.
168100080507      * Bojana J.  * 2008/05/07   * RFS 51776 - Recompile.
168200080520      * Lev O      * 2008/04/29   * RFS51753 - not to lock Batch header
168300080520      *            *              *   file (it cause locking on switch
168400080520      *            *              *   screen for DJT).
168500080520      * Bojana J.  * 2008/05/20   * RFS 47405 - Add check for new value
168600080520      *            *              * "O" for PASS-CDSC-CALCULATOR used
168700080520      *            *              * for GLWB FEE transactions.
168800080520      *            *              * Also add new CPGLWBRULE copybook.
168900080521      * Richard S  * 2008/05/15   * RFS52514 - initialize maturity-date
169000080521      *            *              * of mfatrncpp.
169100080523      * Daniel M.  * 2008/05/23   * RFS 47405 - CPGLWBCKTT copybook.
169200080805      * Richard S  * 2008/05/21   * RFS48630 - GLWB Switches
169300080805      * Frank Hong * 2008/03/22   * RFS46707.
169400080805      *            *              * Changes for 5FL products.
169500080626      * Lev O      * 2008/06/26   * RFS48640 - not to reduce GLWA
169600080626      *            *              *   values for tro transactions.
169700080714      * Emma Yala  * 2008/07/14   * RFS52779 - GLWB - Adding JointLife
169800080714      *            *              * annuitant to Account-Cont-Annuitant
169900080722      * Sanjeev P  * 2008/07/14   * RFS50474 - GLWB Product Release 2
170000080722      *            *              * Included a working variable
170100080805      * Richard S  * 2008/07/25   * RFS54566 - recompile; cpytpseg chng
170200080802      * Pawel A    * 2008/07/31   * RFS55136 - Move verification of the
170300080802      *            *              * investment from FXGLWBVLD to
170400080802      *            *              * FXCHKSEGAT
170500080808      * John O'Callaghan          * RFS49699 - Array tracking
170600080808      *            * 2008/08/06   *
170700080829      * Emma Yala  * 2008/08/18   * RFS54321- Exempt SEL,SWO,TRO placed
170800080829      *            *              * for all units from the Investment
170900080829      *            *              * Minimum functionality
171000080905      * C.Lentini  * 2008/08/28   * RFS53706- Exclude ITX wire orders
171100080905      *            *              * for assignment.
171200080910      * Lev O      * 2008/09/10   * RFS50058 - re-evaluate unit amount
171300080910      *            *              *   for fundserv trades placed as
171400080910      *            *              *   units and converted to dollars.
171500080915      * Pawel A.   * 2008/09/15   * RFS55960 - recompile;
171600080924      * Lev O      * 2008/09/10   * RFS50832 - retrofit the rfs:
171700080924      *            *              *   SOA CDSC calculator enhancement.
171800081001      * Lev O      * 2008/06/01   * RFS50832 - modification for acc le
171900080930      *            *              *   level dsc and withholding tax.
172000081001      * Lev O      * 2008/09/02   * RFS50832 - Retrofiting.
172100080930      *            * 2008/09/02   * RFS49699 - retrofit.
172200080930      * Gary Xia   * 2008/09/09   * RFS55140 - Switches to a different
172300080930      *            *              * series need to be in a different
172400080930      *            *              * contract.
172500081002      * Daniel M   * 2008/09/16   * RFS56974 - New field for CPYTPSEG
172600081017      * Emma Yala  * 2008/10/06   * RFS53578 - Do not charge NR Tax
172700081017      *            *              * on the following cases for rule 77
172800081017      *            *              * - Cash and Nom Cash, when flag = N
172900081017      *            *              * - Nomin Regist, regardless the flag
173000081024      * Daisy Ly   * 2008/10/06   * RFS54435 - reject trade for TFSA
173100081024      *            *              * act if trade-date < 20090101
173200081126      * Gary Xia   * 2008/10/24   * RFS56318 - Recompile.
173300081126      * Lev O      * 2008/11/31   * RFS52816 - CLWB enchancement.
173400081126      * Daniel M.  * 2008/09/29   * RFS44202 - Ontatio LIF tax changes
173500081126      * Lev O      * 2008/10/23   * RFS52816.11 - fix defct N11: the
173600081126      *            *              *   field Original GLWA not updated.
173700081126      * Sanjeev P  * 2008/10/28   * RFS52816.13 - fix defct N13: set
173800081126      *            *              * Qualifying Flag, Spouse DOB and
173900081126      *            *              * RRIF MIN DOB in Account Contract
174000081126      *            *              * when new contract is created.
174100081112      * Lev O      * 2008/10/08   * RFS47719 - update maturity date
174200081112      *            *              *   at purhase time and use it for
174300081112      *            *              *   redemptions.
174400081125      * Lev O      * 2008/11/24   * RFS56680 - initialize rate if it
174500081125      *            *              *   is not found in cdsc redemption
174600081125      *            *              *   rate table.
174700081126      * Shu Yin    * 2008/11/20   * RFS60638 - Fix GLWB wire order SEL.
174800081126      *            *              * CPYTPSEG was also modified.
174900081201      * Lev O      * 2008/12/01   * - retrofit comments:
175000081201      * Daniel M.  * 2008/11/05   * RFS59842 - TFSA to use EffectiveDate
175100081210      * Pawel A.   * 2008/11/10   * RFS55525 - Recompile TRNPST due to
175200081210      *            *              *            CPYTPSEG changes
175300090216      * Daniel M   * 2008/11/26   * RFS60593 - Fix setting of SwitchIntoGlwbYes
175400090216      *            *              * (CPYTPSEG)
175500090216      * Waldi R.   * 2008/12/09   * RFS58714 - Create separate Log-File
175600090216      *            *              *  -Status to capture I-O read errors
175700090216      *            *              *   as per current logic.
175800090216      *            *              *   Use existing Log-File-Status to
175900090216      *            *              *   track I-O errors for writes/
176000090216      *            *              *   rewrites/deletes in MFAIOERRP.
176100090216      * Daniel M.  * 2008/12/22   * RFS59781 - Changes to MFATRNCPP & key
176200090216      *            *              * on MFATRNCPLA
176300090216      * Gary Xia   * 2008/12/12   * RFS52328 - GDV multiple transfer issues.
176400090216      * Lev O      * 2008/12/22   * RFS44008 - added cert# to get the key
176500090216      *            *              *   for cdsc calculator.
176600090216      * Daisy Ly   * 2008/12/24   * RFS34309 - reject EAP trade for    ey
176700090216      *            *              *  RESP act if attach more than 1
176800090216      *            *              *  beneficiary
176900090216      * Gary Xia   * 2008/12/12   * RFS52328 - GDV multiple transfer issues.
177000090216      * Gary Xia   * 2008/12/29   * RFS61637 - GLWA Current Yr update issue.
177100090216      * Pawel A    * 2008/12/24   * RFS62320 - GLWB switch within contract
177200090216      *            *              * updates Withdrawn and excess amount
177300090216      * Pawel A    * 2009/02/03   * RFS64440 - JOBDAILY goes to MSGW
177400090216      *            *              * when dealer licence expired.
177500090216      *            *              * Rejection code igmored.
177600090216      *            *              * Recompile TRNPST for CPYTPSEG
177700090218      * Lev O      *  2009/02/17  * RFS55414 - change interface to     ng
177800090218      *            *              *   FXACCANUIT.                      ng
177900090320      * Andy Chan  * 2009/03/04   * RFS64453 - Copybk CPDSCLCK5 change,
178000090320      *            *              * Recompile TRNPST
178100090320      * Abdi H.    * 2009/03/05 * RFS64042 - Recompile for ESG19 file
178200090320      *            *            * changes
178300090324      * Emman. Yala* 2009/03/05 * RFS56471- SPIA Functionality Phase2
178400090416      * Lev O      * 2009/06/16   * RFS66894 - retrofit the rfs.       ey
178500090416      *            * 2009/03/25   * RFS66894 - make paragraphs unique  ey
178600090416      *            *              *   and modified program to validate ey
178700090416      *            *              *   passed parameters in calc mode.  ey
178800090512      * Gary Xia   * 2009/05/12   * RFS51186 - Acc & investment grouping
178900090525      * Meynard B  * 2009/05/13   * RFS50475 - Tiered Trailer for E Dealers
179000090525      *            *              * CPYTPFILES copybook.
179100090525      * Emman. Yala* 2009/05/21   * RFS54661- Locked In plan enhancements
179200090527      * Meynard B  * 2009/05/27   * RFS50475.4 - Include more transaction
179300090527      *            *              * type for Tiered Trailer CDSC processing
179400090602      * Meynard B  * 2009/05/27   * RFS50475.6 - Check for switches not
179500090602      *            *              * involving back end load fund
179600090616      * Andy Chan  * 2009/04/07   * RFS67639 - Use Reported 'N' to read
179700090616      *            *              *            MFATRNRFP if Reported ' '
179800090616      *            *              *            not found
179900090616      * Waldi R.   * 2009/05/25   * RFS68268 - Copybook CPYTPSEG change
180000090819      * Ewa K.     * 2009/08/04   * RFS72268 - DSC calculator in GUI
180100090819      *            *              * does not return results in MEM env
180200090930      * Waye Marr  * 2009/09/08   * RFS73520 - Rollback of 72268 changes
180300090819      * Bathuu L   * 2009/06/08   * RFS59853 - Remove investment return
180400090819      *            *              * relinquished calculation.
180500090930      * Ewa K.     * 2009/09/14   * RFS73722 - Repromote the original
180600090930      *            *              * changes of RFS72268.
180700090729      * Daniel M.  * 2009/07/29   * RFS54431 - RDSP edits
180800090923      * Daniel M.  * 2009/09/23   * RFS54431.16 - RDSP edits
180900091026      * Bathuu L   * 2009/10/14   * RFS73715 - Modify the conditions for
181000091026      *            *              * inv. return recv. update for LIF acct:
181100091026      *            *              * - include SWI/TRI transactions,
181200091026      *            *              * - remove province code validation,
181300091026      *            *              * - include contr. code rule 88.
181400091208      * Daniel M.  * 2009/11/02   * RFS75512 - Expand cdsc WS fields
181500091208      * Esin  A.   * 2009/06/18   * RFS69951 - Copybook CPRESPEAP change
181600091208      *            * 2009/10/23   * RFS69951 - Copybook CPYTPFILES change
181700091208      *            *              * for the defect RFS 74875
181800091208      * Lev O      * 2009/11/02   * RFS74589 - recompile for account-
181900091208      *            *              * annuitant change.
182000091120      * Waldi R.   * 2009/11/06   * RFS71045 - Added a SECTION clause
182100091120      *            *              * to GET-PRV-BUSINESS-DAY routine to
182200091120      *            *              * prevent the logic leak.
182300091229      * Lev O      * 2009/12/29   * RFS64263 - stop deposits under
182400091229      *            *              *   specified series.
182500091229      * Esin  A.   * 2009/12/29   * RFS64263 - Add/change parameters in
182600091229      *            *              * calling FXACINVG
182700100106      * Ewa K.     * 2010/01/06   * RFS72991 - Recompile for Discount-
182800100106      *            *              * Accrual-Rates (MFADSCARP) change.
182900100203      * Lev O      * 2010/01/26   * RFS76541 - RDSP DSC Grant trades
183000100203      *            *              *  for DSC.
183100100126      * Pawel A.   * 2010/01/06   * RFS77989 - RDSP Fundserv transaction reject
183200100126      *            *              * with error  Contribution Limit Exceeded
183300100719      * Shu Yin    * 2010/03/05   * RFS80144 - Add call to UPIQEEFN to
183400100719      *            *              * update MRQ financial buckets, same as
183500100719      *            *              * UPESPFN.
183600100514      *Jess Maquirang* 2010/04/19 * RFS81379 - Recompile
183700100319      * Lev O      * 2010/03/19   * RFS80214 - added logic to avoid
183800100319      *            *              *   locking records: currently
183900100319      *            *              *   lock could happen in multi-
184000100319      *            *              *   threaded run.
184100100427      * Pawel A.   * 2010/04/20   * RFS68035 - RDSP Phase 4.1:  ITS 2.0 AWD &
184200100427      *            *              * Commission Waving Functionality
184300100501      * Waldi R.   * 2010/05/01   * RFS66816 - Fix for "Unable gross up AWD &
184400100501      *            *              * the net" rejection 29.
184500100518      * Waldi R.   * 2010/05/18   * RFS68035 - Removed                  AWD &
184600100518      *            *              *            beneficiary-seq-no
184700100610      * Daniel M.  * 2010/06/05   * RFS68035.11 - Set 88 lev for Acc&Contr rules
184800100610      * Waldi R.   * 2010/06/10   * RFS68035.14 - new parameter for     AWD &
184900100610      *            *              *            FXCHKDAP.
185000100614      * Waldi R.   * 2010/06/14   * RFS68035.26 - Set the rejection     AWD &
185100100614      *            *              *            code to "00".
185200100616      * Daniel M.  * 2010/06/16   * RFS68035.34 - Limit Non-taxable to total
185300100616      *            *              * DAP/LDAP
185400100719      * Shu Yin    * 2010/06/22   * RFS83911 - Re-promote 80144.
185500100625      * Lev O      * 2010/06/25   * RFS80602 - increase original GWA
185600100625      *            *              *  including LIF ccounts.
185700100705      * Esin A.    * 2010/07/05   * RFS81399 - Defect fix. See USCHKSEGAT..
185800100705      * Waldi R.   * 2010/06/29   * RFS80658 - withhold non-resident
185900100705      *            *              * tax less non-taxable portion of the
186000100705      *            *              * DAP/LDAP when beneficiary country
186100100705      *            *              * code is not "CAN".
186200100709      * Waldi R.   * 2010/07/05   * RFS84456 - Use START and READ NEXT total
186300100709      *            *              * to read TRANS-HEADER-2.
186400100709      *            *              * Adjust last DAP record due to
186500100709      *            *              * rounding if needed.
186600100812      * Emman. Yala* 2010/07/19   * RFS84339 - Remove the check of account
186700100812      *            *              * attribute OLDLF
186800100806      * Daniel M.  * 2010/08/04   * RFS85542 - Reinstate 80144 after rollback
186900100806      *                                        with fix to MSGW due to drop of
187000100806      *                                        WKIQETXN during multi-threading
187100100806      * Waldi R.   * 2010/06/29   * RFS80658.7 - defect fix.
187200100816      * Daniel M.  * 2010/08/11   * RFS85884 - Initialize RDSP module flag
187300100816      *                                        not SEGSYSMAT
187400100823      * Tony V.    * 2010/06/03   * RFS83243 - recompile
187500100909      * Emman. Yala* 2010/09/03   * RFS86430 - LGWA Current YR not considering
187600100909      *            *              * the right minimum when 'RIFGLW' is OFF
187700100909      * Pawel A.   * 2010/08/23   * RFS84063 - Update Account-Fee-Accrual File
187800100909      *                                        when Fee transaction processed
187900100910      * Richard S. * 2010/09/10   * RFS74620 - recompile
188000101014      * Goran Z.   * 2010/10/04   * RFS87136 - Treatment of GPG Fee transactions
188100101014      * Kevin Shen * 2010/09/21   * RFS84482 - Fix bug: LIF/RIF AWD addtional
188200101014      *            *              * tax is not included when calculating gross
188300101014      *            *              * amount
188400101026      * Goran Z.   * 2010/10/26   * RFS83863 - Initialize Trans-CDSC-Purch-Reduc
188500101026      *            *              * values to 0 in order not to report dec data
188600101026      *            *              * error.
188700101027      * Gajen C.   * 2010/10/26   * RFS71446 - Group plan changes for  rch-Reduc
188800101027      *            *              * voluntry contribution transaction  dec data
188900101027      *            *              * Changes.
189000101201      * Sankaran R.* 2010/11/23   * RFS71427 - Suppress ERF charge when
189100101201      *            *              * STTF edit code is on.
189200101201      * Esin A.    * 2010/12/01   * RFS87708 - recompile for CPYTPSEG. AT..
189300101206      * Emman. Yala* 2010/12/06   * RFS87517 - Confirmations should be
189400101206      *            *              * suppressed for SPIA accounts
189500101213      * TCS        * 2010/12/13   * RFS84988 - Recompile
189600101231      * TCS        * 2010/12/15   * RFS84977 - Enhancements to RESP/EAP
189700101231      *            *              * Fuctionality.
189800110116      * TCS        * 2011/01/11   * RFS71433 - Enhance CDSC Calculation
189900110114      *            *              * Functionality .
190000110228      * TCS        * 2011/01/13   * RFS84977.0 - RFS84977 fix.
190100110228      * TCS        * 2011/01/26   * RFS84977.4 - RFS84977 fix.
190200110228      * Waldi R.   * 2011/01/07   * RFS89684 - RDSP fixes to correct updates to
190300110228      *            *              * MFATRNHDP.
190400110228      * Emman. Yala* 2011/02/08   * RFS92156 - Fixing Decimal data error issue
190500110228      * TCS        * 2011/02/09   * RFS84977.12 - RFS84977 fix.
190600110228      * TCS        * 2011/02/11   * RFS84977.17 - RFS84977 Add FXRESPEAP
190700110217      * Richard Shi* 2011/02/17   * RFS84184 - ESG 21
190800110217      *            *              * recompiled for MFAACCNMP.
190900110818      * Daniel M.  * 2011/06/02   * RFS96966 - Rollback 9 0 1 0 5
191000110308      * Waldi R.   * 2011/03/08   * RFS90105 - new parms for UPIQEEFN.
191100110818      * Daniel M.  * 2011/06/13   * RFS97333 - Reinstate 90105
191200110324      * TCS        * 2011/03/24   * RFS71433.1 - DSC fix for AWD transaction
191300110325      * TCS        * 2011/03/25   * RFS71433.2 - DSC fix for redemption code
191400110405      * Dharmendra * 2011/03/31   * RFS71433.4 - DSC fix for Switches   code
191500110406      * Nasra F    * 2011/04/06   * RFS89337   - Recomplie r Switches   code
191600110411      * Dharmendra * 2011/04/11   * RFS71433.5 - DSC fix for MFR
191700110425      * Pawel A    * 2011/04/25   * RFS95407   - DSC are charged for the RESP/
191800110425      *            *              * RDSP's grant and bond
191900110505      *Alan Andrade* 2011/05/05   * RFS92145 - Tiger MFR Accrual process
192000110505      *            *              * For partial redemption trades, reduce
192100110505      *            *              * the MFR current eligible units.
192200110505      *            *              * For full redemption trades, create
192300110505      *            *              * and post MFR trades prior to posting
192400110505      *            *              * the full redemption trade.
192500110818      *Alan Andrade* 2011/07/06   * RFS97579 - Tiger MFR Accrual Proc Fixes
192600110818      * Emmanuel Y * 2011/08/02   * RFS 99039 - pull 9 7 3 3 3
192700110608      * Andy Lo    * 2011/06/08   * RFS95440 - Recompile
192800110609      * Andy Chan  * 2011/06/09   * RFS92477 - Recompile
192900110912      * Geeta S.   * 2011/06/27   * RFS 91783- Recompile for MFABCHTYP.
193000111006      * Emmanuel Y * 2011/09/27  * RFS101074 - The Account assignment
193100111006      *            *             * is generated with incorrect status
193200110906      * Nagamani S.* 2011/08/16   * RFS92475 - Short term trading fee. *
193300111205      *Ramya R     * 2011/08/17   * RFS92504 - Tiger Fund merge process
193400110913      *Saravanan R * 2011/08/19   * RFS92456 - Transaction batches
193500111019      * Suresh G.  * 2011/09/12   * RFS92499 - Recompile
193600110919      * Lev O      * 2011/09/19   * RFS97248 - fixed bug: negative fed
193700110919      *            *              *    tax.
193800111012      * Lev O   &  * 2011/10/12   * RFS98466 - (retrofit Dharmendra's
193900111012      * Dharmendra *              * changes) - include outstanding
194000111012      *            *              * unit balance in Account Level DSC
194100111202      * Priya K    * 2011/08/26   * RFS92917 - Added new parms for
194200111202      *            *              * UPIQEEFN
194300111202      * Shu Yin    * 2011/09/14   * RFS99447 - Reinstate 90105
194400111012      *            *              * Calculation.
194500111013      *Alan Andrade* 2011/10/05   * RFS100957- Fix 92482 changes       ixes
194600111013      * Lev O      * 2011/10/13   *          - retrofited from Base.   ixes
194700111103      * Waldi R.   * 2011/10/27   * RFS102122- Fix for 92475.
194800111019      * Walde R.   * 2011/09/07   * RFS52265 - introduced exemption
194900111019      *            *              * rules for assignments and locked-in
195000111020      * Thilaga K  * 2011/09/07   * RFS96527 - Perform Resets based up
195100111020      *            *              * on Age Restrictions.
195200111114      * Naga       * 2011/11/04   * RFS96530 - Guaranteed Amount based on
195300111103      *            *              * years to Maturity defect.8
195400111202      * Venkatesh C* 2011/09/07   * RFS 96081 - Excess Withdrawal alert
195500111202      *            *              * on Age Restrictions.
195600111202      * Pawel A    * 2011/11/15   * RFS91768 -  Harmony  - Asset Allocation and
195700111202      *            *              * Rebalancing (added comment only)
195800111104      *Alan Andrade* 2011/10/28   * RFS101772- Fix:Re-invested distrib-
195900111104      *            *              * ution where ROC is applied same day
196000111104      *            *              * to be calcculated same as Cash dist
196100111107      * Emmanuel Y.* 2011/11/07   * RFS102182- Incorrect detail created
196200111107      *            *              * on Acct Assignment on linked Buys
196300111202      * Naga       * 2011/11/14   * RFS 102693 - Withdrawals from GLWB
196400111202      *            *              * funds above the LWA have been
196500111202      *            *              * processed in error
196600111202      *            *              * Recompile for CPYTPSEG changes
196700111202      * Venkatesh C* 2011/09/07   * RFS 96081 - Excess Withdrawal alert
196800111202      *            *              * on Age Restrictions.
196900111202      * Pawel A    * 2011/11/15   * RFS91768 -  Harmony  - Asset Allocation and
197000111202      *            *              * Rebalancing (added comment only)
197100111114      * Emmanuel Y * 2011/11/11   * RFS102028- Reject if ContRedCode is blank
197200111202      * Andy Chan  * 2011/11/02   * RFS101832/92499 - Reject if exchange rate
197300111202      *            *              *                   not found
197400111202      * Emmanuel Y.* 2011/11/24   * RFS102421- JOBDAILY experiencing
197500111202      *            *              * excessive runtime
197600120109      * Lev O      * 2011/12/08   * RFS103575 - do not update ERF
197700120109      *            *              * files in calculator mode.
197800120109      * Emmanuel Y.* 2011/12/12   * RFS103437- Incorrect information on
197900120109      *            *              * Account Assignment after switches
198000120109      *Jess Maquirang * 2011/12/21* RFS101280 - Wire order remained
198100120109      *                           * uncontracted during multi-thread processing.
198200120203      * Daniel M.  * 2012/01/23   * RFS105330 - Recompile TRNPST w/o 1 0 3 6 4 3
198300120203      * Manohar J. * 2011/12/19   * RFS103643 - Added new parms.
198400120210      * Thilaga K  * 2012/02/10   * RFS102778- Changing the Program to use
198500120210      *            *              * XINRRPTMIN for Minimum/Maximum Validation.
198600120210      *            *              * Created new copy book for replacing
198700120210      *            *              * MINIMUM-AMT-VALIDATION SECTION.
198800120426      * Angela N.  * 2012/03/22   * RFS106779 - Added codes to handle
198900120426      *            *              * split option code A - all units.
199000120319      * Vinsfy J.  * 2012/01/04   * RFS64348 - Service Fee Enhancement
199100120319      * Lev O      *              *          - retrofit the changes
199200120319      *            *              *  using latest staging version.
199300120424      * Pawel A.   *              * RFS100971 - Have Financier linked based on
199400120424      *            *              * the Age Date of the units and not Trade date
199500120607      * Thilaga K  * 2012/04/27   * RFS108168 - Changes to CPYTPSEG.
199600120614      * Manohar J. * 2012/05/24   * RFS108322 - Added new parms.
199700120613      *Jess Maquirang * 2012/06/06* RFS110607 - Fund merger (IN) transaction
199800120613      *                           * picked up distribution price incorrectly.
199900120627      *Jess Maquirang * 2012/06/13* RFS108533 - Recompile for CPDSCLCK5 change.
200000120626      *Raj Kumar A * 2012/06/25   * RFS108383 - Added back 84339
200100120628      *Sherene N   * 2012/05/24   * RFS104600 -  Calculation of a GLWB
200200120628      *            *              * Minimum value for Cash  nominee
200300120628      *            *              * payout accounts
200400120822      *Ambikapathy * 2012/08/10   * RFS111550 - CRA-Non-Resident Certification
200500120822      *            *              * Unitrax(Phase 2)
200600120914      *Vinsfy J    * 2012/09/14   * RFS91272 - RDSP ITS version 2.2 changes.
200700121022      * Tony V.    * 2012/09/27   * RFS109024 - DSC Calculator does not
200800121022      *            *              * return values when default contr/
200900121022      *            *              * redem code is not setup
201000121001      * Lev O      * 2012/10/01   * RFS114393 - calculator run for
201100121001      *            *              *  long time: change file to input
201200121001      *            *              *  only to avoid the locks.
201300121108      * Nasra F    * 2012/10/01   * RFS115869 - Check to see fedral tax
201400121108      *            *              * is greater then zero
201500121108      * Michael Fan* 2012/10/29   * RFS115704 - Federal Tax Percent and  *
201600121108      *            *              * Provincial Tax Percent change to 5   *
201700121108      *            *              * decimal places instead of 2 on files *
201800121108      *            *              * MFATRNTXP and MFATRNTXDP.            *
201900121108      * Boopathy D * 2012/11/08   * RFS98866 - New SDSP Account Types.
202000121108      *            *              * Moved "Daily-Assignment-LoanID Section"
202100121108      *            *              * from TRNPST to CPDSCLCK5
202200121219      * Lev O      * 2012/12/06   * RFS117135 - NR tax defect fix.
202300130104      *Ambikapathy * 2012/10/24   * RFS118161 - Recompile
202400130118      * Ewa K.     * 2013/01/18   * RFS 112134 - Support DSC Reduction P
202500130118      *            *              * method of "S" for fee with "GPFEE" P
202600130118      *            *              * transaction sub-type.              P
202700130118      *Jess Maquirang * 2013/01/15* RFS118245 - changes to CPDSCLCK5 to
202800130118      *                           * reset charges to 0 when negative.
202900130128      * Rajkumar A * 2013/01/28   * RFS112944 - Defect fix for RFS96527ract
203000130128      * Suresh G.  * 2013/01/28   * RFS113773 - To validate transactions
203100130128      *            *              * & calculation all applicable amounts/fees
203200130128      *            *              * for the transactions and then posts the
203300130128      *            *              * transaction.
203400130208      * Geeta S.   * 2013/02/08   * RFS 119153-Recompile for MFATRGIDP.
203500130211      * Suresh G.  * 2013/02/04   * RFS118744- Recompile for MFAINVPTP.
203600130822      * Boopathy D * 2012/01/11   * RFS103860 - Added parm for UPIQEEFN call
203700130312      * Rajkumar A * 2012/12/17   * RFS 106558 - To populate MFAACCLNP P
203800130308      * Suresh G.  * 2013/02/15   * RFS113777 - Added New parameter
203900130308      *            *              * "Account Amount" field in
204000130308      *            *              *  XINRRPTMIN.
204100130313      * Dharmendra * 2013/03/13   * RFS113783 - Added logic for MVA
204200130313      *            *              * computations for early redemption
204300130313      *            *              * of GIC certificates
204400130328      * Daisy Ly   * 2013/03/23   * RFS 113783
204500130328      *            *              * -set investment before call INTCLC
204600130315      *            *              * -include interest in MVA formula
204700130316      *            *              * -store the gic interest in temp
204800130322      * Nasra F    * 2013/03/21   * RFS121245-Read Account-Misc-Detail
204900130321      *            *              * with no lock
205000130428      * Shu Yin    * 2013/04/22   * RFS122496 - Rejection of future trade
205100130428      *            *              * was skipped by changes in CPYACCMAT
205200130325      * Lev O      * 2013/03/05   * RFS107031 - initialize contract.
205300130325      * Waldi R.   * 2013/03/05   * RFS112136 - suppress redemption fee
205400130325      *            *              * for DTH transactions. Process INT
205500130325      *            *              * transactions with DTH origin code.
205600130325      * Ganbold L. * 2013/03/08   * RFS119993 - Recompile only.
205700130325      * Naga       * 2013/02/26   * RFS118920 - New Message on Contract's
205800130325      *            *              * Audit Log  from A Transfer in kind
205900130325      *            *              * from RRSP to RIF.
206000130325      * Shu Y.     * 2013/03/05   * RFS112133 - Account level CDSC enhancement
206100130325      *            *              *   with changes in CPYTPFILES & CPDSCLCK5
206200130404      * Alan A.    * 2013/03/06   * RFS119994 - Recompile only
206300130404      * Nagamani S * 2013/04/03   * RFS113784 - process the multiple
206400130404      *            *              * transcations for GIC account through
206500130428      *            *              * online posting
206600130428      * Manohar J. * 2013/04/05   * RFS119802 - Recompile only
206700130428      * Nagamano S.* 2013/04/24   * RFS120691 - Recompile only
206800130513      * Rajkumar A * 2013/05/03   * RFS122446 - Changes to CPYTPSEG
206900130513      *            *              * to update Account level infos.
207000130618      * Shu Yin    * 2013/05/15   * RFS120747 - Changes in CPDSCLCK5
207100130428      * Vinsfy J   * 2013/04/28   * RFS112945 - Added condition to
207200130428      *            *              * create PUP records for ALDDTF edit code.
207300130430      * Shu Y.     * 2013/04/30   * RFS112133 - Fix QC31514 - Changed
207400130430      *            *              *   calculation for gain in CPDSCLCK5
207500130507      * Daphne D.  * 2013/02/22   * RFS117763 - Account Type Specific
207600130507      *            *              *             Purchase, SWITCH/
207700130507      *            *              *             TRANSFER Restriction
207800130507      *            *              *             Validation
207900130503      * Boopathy D * 2013/04/04   * RFS119827 - Recompile for 115495   on
208000130503      * Boopathy D * 2013/04/04   * RFS115495 - Bypass Withholding Tax on
208100130503      *            *              * redemptions and distributions to non-
208200130503      *            *              * residents based on func code 'WVNRT'
208300130503      * Bathuu L   * 2013/04/15   * RFS108486 - Reduce DSC Charge on
208400130503      *            *              * RDSP account.
208500130514      * Sherene N  * 2013/05/14   * RFS103858 - Seg Fund Compensation
208600130514      *            *              * Structure and Commission Recovery
208700130514      *            *              * functionality
208800130524      * Boopathy D * 2013/05/24   * RFS115495 - Fix QC32015 - Changed
208900130524      *            *              * TRNPST to add copybook CPBYPWHTAX at
209000130524      *            *              * bottom and perform statement in the
209100130524      *            *              * place of copybook. Missed in code
209200130524      *            *              * retrofit of other RFS
209300130529      * Rajkumar A * 2013/05/20   * RFS118527 - Waive MVA until free
209400130529      *            *              * dollars are used up.
209500130606      * Callista N * 2013/06/06   * RFS121057- Contract Rule Maintenance
209600130618      * Daniel M.  * 2013/06/10   * RFS117763 - Fix defect #TBD
209700130618      * Lev O      * 2013/06/12   * RFS103858 Defect 32448
209800130712      *Jess Maquirang * 2013/06/12* RFS123299 - prevent file lock errors
209900140508      * Geeta S.   * 2013/02/08   * RFS 118636 - Align Contract Mat Dates
210000131022      * Daphne D.  * 2013/07/02   * RFS124505 - Defect Fix for RFS11776
210100130725      * Daphne D.  * 2013/07/02   * RFS124505 - Defect Fix for RFS11776
210200130725      * Nagamani S * 2013/07/03   * RFS124541-QC Defect 32674 fix,
210300130725      *            *              * Changed CPYACCMAT copybook.
210400130725      * Jeyarajan  * 2013/07/08   * RFS124507- ATS defect fix for the
210500130725      *            *              *            RFS116420
210600130725      * Lev O      * 2013/07/12   * RFS125174 - fix defect for NL funds
210700130725      *            *              *  (fix is in CPDSCLCK5)
210800130725      * Lev O      * 2013/07/17   * RFS123672 - fix defect - error:
210900130725      *            *              * "Inv str not match acc"
211000130719      * PREMIL K   * 2013/07/12   * RFS110904 - PREFORM GDV RESET AND
211100130719      *                           * REVERSE RESET.
211200130725      *            *              * Changed CPYTPSEG to pop            ulate
211300130719      *                           * two new fields of MFAACCONP.
211400130731      * Muthu       *              * RFS120931 - MAXIMUM WITHDRAWAL
211500130731      * Lakshmi M   *              * PAYOUT GUARANTEE AMOUNT.
211600131022      * NAGA       * 2013/04/30   * RFS117124 -Base Term Commissions.
211700130826      * NAGA       * 2013/07/31   * RFS125987 - Bypass rule set up for INC
211800130826      *            *              * and Cash account
211900131118      * Waldi R.   * 2013/08/09   * RFS126462 - NL to BE switcCPYTPSEG
212000130826      *            *              * creating CPP record.
212100131022      * Waldi R.   * 2013/08/09   * RFS126462 - NL to BE switch not
212200131022      *            *              * creating CPP record.
212300130826      * Lev O      * 2013/08/23   * RFS126958 - fix defect for switches
212400130826      *            *              *  within same account for NL funds.
212500130826      *            *              *  (fix is in CPDSCLCK5)
212600130912      * Richard S. * 2013/09/03   * RFS127489 - retrofit POJ into ACC
212700130909      * Ewa K.     * 2013/09/09   * RFS127197 - Do not lock record of
212800130910      *            *              * TRANS-GIC-REDEMPTION-DETAILS file
212900130910      *            *              * when run from CDSC calculator.
213000130923      * RichardS   * 2013/09/17   * RFS127385 - create dummy RDP record
213100130923      *            *              * for BE-NL that has free dollars.
213200130923      * Ewa K.     * 2013/09/05   * RFS127450 - Initialize
213300130923      *            *              * WS-PURCHASE-DETAIL variable within
213400130923      *            *              * GET-CDSC-ORIGINAL-DETAILS section
213500130923      *            *              * to eliminate issue of Age Date of
213600130923      *            *              * MFATRNCPP being equal to zero.
213700131022      * Thilaga K  * 2013/09/10   * RFS 127129 - Recompile.
213800130924      * Boopathy D * 2013/09/23   * RFS128279 - Introduced new variable
213900130924      *            *              * ws_skip_withholding_tax to bypass
214000130924      *            *              * withheld tax and initialized outside
214100130924      *            *              * BYPASS-WITHHOLD-TAX section in
214200130924      *            *              * CPBYPWHTAX.
214300130924      * Uma C      * 2013/09/23   * RFS120908 - Defect fix - Unit amounts
214400130924      *            *              * are varying for transferred contracts
214500130924      *            *              * on ACITSBUY and ACITSSEL screens.
214600131022      * Michael Fan* 2013/10/01   * RFS117124 - Introduced new GIC parm
214700131022      * Fatima Haji*              * to bypass GIC commission calculation.
214800131022      *            *              * Add new program FXGMATDAT to calculate
214900131022      *            *              * GIC term-selected for TRI/SWI GIC
215000131022      *            *              * transactions without GIC instruction and
215100131022      *            *              * GIC certificate created yet in order for
215200131022      *            *              * commission calculation.
215300130930      * Daisy Ly   * 2013/09/26   * RFS127383 - not to override the    ts
215400130930      *            *              * contract start date if exists      ts
215500131008      * Waldi R.   * 2013/10/08   * RFS129169 - Defect fix for GUI calculator.
215600131022      * Michael Fan* 2013/10/22   * RFS129525 - Defect fix for TRO/TRI
215700131022      *            *              *  transaction not process because of
215800131022      *            *              *  commission changes on RFS1117124
215900131031      * Uma C      * 2013/10/03   * RFS110292 - Defect fix - Switch involving
216000131031      *            *              * over 150 contracts caused a MSGW
216100131031      *            *              * status in JOBDAILY.
216200131215      * Vinsfy J   * 2013/11/20   * RFS125258 - IATRAX Enhancement.
216300131216      * Abhisek M  * 2013/11/19   * RFS130780 - Added variable
216400131216      *            *              * lc_GuarBenEligibleDate for MFASEGPARAM
216500131216      *            *              * dataarea
216600131227      * Muthu      * 2013/09/27   * RFS126482 - RDSP - ITS 3.1 BUDGET
216700131227      * Lakshmi M  *              * 2012 CHANGES PART 1 - WITHHOLDING
216800131227      *            *              * TAX
216900140108      * Naga       * 2013/12/19   * RFS131914- DEFER RFS128793 Qc 35154
217000140115      * Michael Fan* 2014/01/15   * RFS132956- Add new parameter to copy book
217100140115      *            *              * CPTRNPST1 for warning message '32' coming
217200140115      *            *              * from INTCLC under CALCULATE-GIC-DEDUCTION.
217300140115      *            *              * Create new copy book CPYTPGIC. Move routine
217400140115      *            *              * CALCULATE-GIC-DEDUCTION to the new copy
217500140115      *            *              * book and new logic to populate the new
217600140115      *            *              * warning message code from INTCLC.
217700140116      * Noble T    * 2014/01/13   * RFS129364- To fix CPL trade rejection
217800140116      *            *              * issue if the dealer is inactive.
217900140129      * Boopathy D * 2014/01/24   * RFS132742 - Added Contr Redem Code
218000140129      *            *              * rule 4 and 5 in 'VTR-0045' before
218100140129      *            *              * call statement to program 'FXRDSPCHK'.
218200140131      * Muthu      * 2014/01/29   * RFS133231 - RDSP Withholding Tax
218300140131      * Lakshmi M  *              * and DSC impact.
218400140425      * Shakina    * 2014/02/10   * RFS131445 - Transaction on Death
218500140425      *            *              * Daily Interest fund generated
218600140425      *            *              * in error.
218700140305      *TamilSelvi  * 2014/02/07   * RFS132676 - Fix provided in
218800140508      *            *              * CPYTPSEG.
218900140415      * Noble T    * 2014/03/07   * RFS129709 - Fix to create audit log
219000140415      *            *              * only in update mode in CPYTPSEG.
219100140327      * Antony S   * 2014/03/05   * RFS132236 - Client specfic: JHN
219200140327      *            *              * Commission Error
219300140411      * Sairam D   * 2014/04/11   * RFS134768- Recompile
219400140422      *TamilSelvi  * 2014/04/17   * RFS135532 - Valid SELL Transaction
219500140422      *            *              * rejection is fixed.
219600140422      * Antony S   * 2014/03/31   * RFS129965 -Purchases should not
219700140422      *            *              * reject to co-mingle GLWB and
219800140422      *            *              * Non-GLWB funds in an Account
219900140508      * Shu Yin    * 2014/04/03   * RFS135431 - Changes in CPYTPGIC
220000140506      * Ganbold L  * 2014/04/08   * RFS134706 - Change for GIC Renewal
220100140506      *            *              * not to substract commission on
220200140506      *            *              * transfer in
220300140527      * Jeyarajan  * 2014/04/08   * RFS126805- Removed the changes of
220400140527      *            *              * 1 2 4 5 0 7
220500140527      * Shu Yin    * 2014/04/10   * RFS126805 - Process GIC maturity
220600140527      *            *              * redemption with multiple details
220700140508      * Shu Yin    * 2014/04/28   * RFS135520 - MVA charge should not be
220800140508      *            *              * on account free amount
220900140508      * Suresh G.  * 2014/05/02   * RFS136431 - Remove Set lb_OnlineYes to
221000140508      *            *              * True under GET-CURRENT-RECORD SECTION.
221100140513      * TamilSelvi * 2014/05/06   * RFS136379 - Unitrax AWD withdraw mo
221200150109      *            *              * re Units than the Account had.
221300140521      * Abhisek M. * 2014/05/15   * RFS132733 - Recompile
221400140521      * Thilaga    * 2014/05/15   * RFS133150 - Recompile
221500140521      * Uma C      * 2014/04/28   * RFS134535 - Original GLWA (RRIF) issue
221600140521      *            *              * for non Income Accounts.
221700140609      * Thilaga K  * 2014/05/07   * RFS134936 - Recompile for MFAACCNNP
221800140609      * Sushmita J * 2014/04/01   *RFS134626 - Recompile for MFAACMDP.
221900140609      *            *              * and renamed the field Effective-Date
222000140609      *            *              * to Effectiv-Date.
222100140609      * Tamilselvi * 2014/05/09   * RFS136015- Recompile for MFAACMDP.
222200140609      * Tamilselvi * 2014/05/20   * RFS116449- GIC/DII Delaer Rep Valid
222300140926      * Sushmita J * 2014/04/01   *RFS134626 - Recompile for MFAACMDP.
222400140926      *            *              * and renamed the field Effective-Date
222500140926      *            *              * to Effectiv-Date.
222600140522      * Praveen E  * 2014/05/16   * RFS136840 - Changed the mode to call
222700140522      *            *              * FXTRFVAL.
222800140527      * Shu Yin    * 2014/05/27   * RFS136956 - MVA charge should not be
222900140527      *            *              * on account free amount for NL fund
223000140701      * Lev O      * 2014/05/30   * RFS137460 - rollback RFS134706
223100140701      *            *              *  to make sure Sommission subtracted
223200140701      *            *              *  from gross when allowable switches
223300140716      *            *              *  flag is "N".
223400140527      * Kamal T    * 2014/05/27   * RFS135263 - GUI DSC calculator is not
223500140527      *            *              * showing the ERED FEE amounts in the same
223600140527      *            *              * way as in TUI
223700140926      * Manjusha V * 2014/04/10   * RFS135486 - Declare the variables
223800140926      *            *              * for call to new program FXYRTOMAT
223900140716      * Ramya K    * 2014/03/24   * RFS124070 - Final Top Up Date
224000140716      *            *              * on an income plan account
224100140604      * Ashmitha K * 2014/06/04   * RFS112508 - Partial redemptios are
224200140604      *            *              * being processed  out of sequence
224300140623      * Lev O      * 2014/06/23   * RFS136120 - fix capping inv min issue.
224400140625      * Abhisek M  * 2014/06/25   * RFS138028- Recompile for MFAACCONP.
224500140627      * Rupesh Kr  * 2014/06/27   * RFS137627- Switch out of GI or TI triggered
224600140627      *            *              * death processing is not paying accrued int.
224700140701      * Ashmitha K * 2014/06/11   * RFS136069 - Net amount does not equal
224800140701      *            *              * to gross amount
224900140702      * Lev O      * 2014/07/02   * RFS137579 - initialize TRANS-
225000140702      *            *              *  CHARGES File to make sure country
225100140702      *            *              *  and province is correct.
225200140703      * Ashmitha K * 2014/06/27   * RFS133094 - DSC are being charged
225300140703      *            *              * on the redemption of No Load (NL) funds
225400140716      * Manjusha V * 2014/04/01   *RFS129902 - Recompile for CPGLWBRULE
225500140714      * Pawel A    * 2014/07/14   * RFS138756 - Fix retrofit issues
225600140926      * Lev O      * 2014/07/17   * RFS136120 - fix capping inv min issue.
225700140715      * Siddharth N* 2014/07/14   * RFS136825 - Added a variable.
225800140715      * Lev O      * 2014/07/15   *    - fixed defect in cpdsclck5
225900140716      * Praveen E  * 2014/07/16   * RFS!37837- Changed CHQ status to PND for
226000140716      *            *              * GIC fund.
226100140718      * Michael Fan* 2014/07/18   * RFS137833- Add new logic to handle the
226200140718      *            *              * interest coming out from intact transfer.
226300140718      *            *              * For intact transfer, GIC certificate is
226400140718      *            *              * transfer as is from the FROM account to
226500140718      *            *              * the TO account. This is normally done to
226600140718      *            *              * transfer from RRSP to RRIP account. The
226700140718      *            *              * accrual interest coming out from the
226800140718      *            *              * transfer out account will not added to the
226900140718      *            *              * transfer in account directly on the Gross
227000140718      *            *              * amount.  Instead, the accraul interest
227100140718      *            *              * coming from the transfer out account is
227200140718      *            *              * stored as interest adjustment record on
227300140718      *            *              * the transfer in account againt to the new
227400140718      *            *              * certificate created for the transfer in
227500140718      *            *              * account.  At the interest payment time of
227600140718      *            *              * the transfer in account.  The adjusted
227700140718      *            *              * interest amount will be added to the regular
227800140718      *            *              * accrual interest payment as one lump sum of
227900140718      *            *              * interest payment.
228000140718      *            *              * Routine GET-GIC-CERTIFICATE is moved to
228100140718      *            *              * copy book CPYTPGIC in order to free up lines
228200140718      *            *              * on TRNPST to add the changes.
228300140926      * Daisy Ly   * 2014/07/18   * RFS137837- select PND sel for W mode
228400140926      * Vinsfy J   * 2014/06/19   * RFS136634 - Recompile for MFAACCATP
228500140926      * Sairam DC  * 2014/06/23   * RFS137217 - Recompile for MFAACCLNP
228600140729      * Lev O      * 2014/07/29   * RFS139280 - fix defect when SWO/TRO
228700140729      *            *              *   become HST but SWI/TRI stays in
228800140729      *            *              *   CHQ status.
228900140812      * Sangeetha V  * 2014/08/11    * RFS137032 - allow INI purchase
229000140812      *              *               * to be processed when edit code
229100140812      *              *               * OVRIMT is "ON".
229200140813      * Nagamnai S * 2014/08/13   * RFS139007 - Recompile for CPGLWBRULE
229300140904      * Nagamnai S * 2014/09/04   * RFS137082 - GLWB Enhancements
229400140904      *            *              * Original GWA/LWA
229500140916      * Nagamani S * 2014/09/15   * RFS140386 - LWA amount not calaculated
229600140916      *            *              * correctly.
229700140916      * Daisy Ly   * 2014/09/16   * RFS138276 - use the original trans ted
229800140916      *            *              * type when calculate penalty and
229900140916      *            *              * replacement for GIC MVA method
230000140926      * Nagamani S * 2014/09/15   * RFS140386 - LWA amount not calaculated
230100140926      *            *              * correctly.
230200141017      * Siddharth N* 2014/10/17   * RFS141298 - For non-income accounts added
230300141017      *            *              * check on GLWA Rule '3' to populate ORIGINAL
230400141017      *            *              * on ACCCGWDT screen.
230500141028      * Lev O      * 2014/10/23   * RFS140721 - fix gross up net
230600141028      *            *              *   for MVA penalties.
230700141103      * Michael Fan* 2014/11/03   * RFS142003 - fix issue on double counting for
230800141103      *            *              *   for assignment units.
230900150408      * Suresh G.  * 2014/11/19   * RFS126845 - To enhance Transfer transaction
231000150408      *            *              * processing to use deposit equivalent amount
231100150408      *            *              * in reduction process including financers
231200150408      *            *              * with Years for gain greater than zero.
231300150408      * Lev O   .  * 2014/12/31   * RFS126845.1 - fix defect 39253
231400141106      * Pooja K    * 2014/10/29   * RFS114854 - Withholding tax charged
231500141106      *            *              * incorrectly for specific contr/redemption
231600141106      *            *              * code INDSEL
231700141118      * Lev O      * 2014/11/18   * RFS139844 - fix net placed trade
231800141118      *            *              *   for RDSP accounts.
231900150109      * Noble T    * 2015/01/09   * RFS143073 - Defect Fix - Non-resident tax
232000150109      *            *              * was charged on distributions.
232100150119      * Sangeetha V* 2015/01/19   * RFS 135402 - Modified the program to calcula
232200150119      *            *              * -te commission rate correctly.
232300150202      * Thilaga K  * 2015/01/29   * RFS144671- GWA amount being updated
232400150202      *            *              * incorrectly if GWA Calculation
232500150202      *            *              * Rule = 4.
232600150219      * Lev O      * 2015/02/11   * RFS143631-Fix transfers with option X
232700150204      * Michael Fan* 2014/12/01   * RFS140269 - Modify to let TRNPST split all
232800150204      *            *              * GIC redemption transactions for order of
232900150204      *            *              * redemption and create all necessary interest
233000150204      *            *              * and re-purchase buy transaction since TRNPST
233100150204      *            *              * is not calling from JOBGIC for account level
233200150204      *            *              * DSC and account level ACB reporting.
233300150226      * Michael Fan* 2015/02/26   * RFS140269 - Defect #40124.
233400150306      *            *              * 1. Do not reject redemption transaction if
233500150226      *            *              * there is CHQ transaction exist and the
233600150226      *            *              * redemption transaction trade date is less
233700150226      *            *              * than or equal to the trade date of the CHQ
233800150226      *            *              * transaction.
233900150226      *            *              * 2. Need to recalculate the interest trans
234000150226      *            *              * amount if there is a back dated transaction
234100150226      *            *              * processed on the same date as the interest
234200150226      *            *              * transaction (original code = 'GIM') since
234300150226      *            *              * the backdated transaction will affect the
234400150226      *            *              * GIC certificate balance in turn it will
234500150226      *            *              * affect the interest being accrued.
234600150226      *            *              * 3. Create new copy CPYTPLSIF to move some
234700150226      *            *              * of the LSIF routines from TRNPST to the
234800150226      *            *              * new copy book since maximum line # is
234900150226      *            *              * reach on the TRNPST source.
235000150306      * Michael Fan* 2015/03/06   * RFS140269 - Continue fix defect #40124
235100150306      *            *              * 1. For DII fund interest pay at year end,
235200150306      *            *              * recalculate interest amount if there is
235300150306      *            *              * backdated transaction processed on the
235400150306      *            *              * same process date.
235500150310      * Lev O      * 2015/03/10   * RFS144361 - Fix TRNPST logic
235600150310      *            *              *   not to leave residual units
235700150310      *            *              *   while doing asset allocation
235800150310      *            *              *   rebalancing.
235900150408      * Lev O      * 2015/04/08   * RFS146636 - Fix TRNPST to take
236000150408      *            *              *   default commission rate when
236100150408      *            *              *   standard commission is X,
236200150408      *            *              *   Comm recovery /comm recovery ON.
236300150506      *TamilSelviG * 2015/04/20   * RFS146960 - Fix to get the correct
236400150506      *            *              * insurance fees when multiple annuit
236500150506      *            *              * -y contract is present.
236600150619      * Michael Fan* 2015/02/23   * RFS138770 - Modify to let TRNPST accept GIC
236700150619      *            *              * waive flag, override replacement amount and
236800150619      *            *              * penalty amount from calculator mode.  Use
236900150619      *            *              * this value in calculator mode to process if
237000150619      *            *              * values are passed in.
237100150818      * Thilaga K  * 2015/05/12   * RFS145136- Recompile for MFAACCCSP.
237200150708      * R Miguel   * 2015/06/16   * RFS 148374 - Recompile for MFATRNUCP.
237300150708      * Zaheer A   * 2015/03/23   * RFS143608 - RESP: Unitrax SAGES and
237400150708      *            *              * BCTESG Phase 1 functionality
237500150708      * Eswaran T  * 2015/05/20   * RFS143609 - RESP: Unitrax SAGES and
237600150708      *            *              * BCTESG Phase 2 functionality
237700150714      * Muthu S    * 2015/06/30   * RFS147066 - Previous GWA amount updated on
237800150714      *            *              * TRI account.
237900150819      * Eswaran T  * 2015/07/13   * RFS147525 - To fix Withholding tax being
238000150818      *            *              * applied even when attribute code set up
238100150818      *            *              * to have it waived
238200150728      * Michael Fan*  2015/07/22  * RFS149620- Remove the new parameter*
238300150728      *            *              *  added on 138770 since the         *
238400150728      *            *              *  position on used by the parameters*
238500150728      *            *              *  on local data area also used by   *
238600150728      *            *              *  SWAPBACK in Web Service.  This    *
238700150728      *            *              *  cause incorrect result returned   *
238800150728      *            *              *  from Web Service.  The new        *
238900150728      *            *              *  parameters are store in work file *
239000150728      *            *              *  and retrieved inside TRNPST from  *
239100150728      *            *              *  the work file instead of passing  *
239200150728      *            *              *  it through by using the local     *
239300150728      *            *              *  data area.                        *
239400151001      * Thilaga K  * 2015/09/15   * RFS147796 - EFT payment not done   *
239500151001      *            *              *  for SELL transactions.
239600151001      * Ragavi S   * 2015/10/01   * RFS149211 -JOBDAILY going into MSGW*
239700151001      *            *              * when processing DII transactions   *
239800151013      * Kamal T    * 2015/09/24   * RFS151731 - Free dollars not       *
239900151013      *            *              * calculated correctly during same   *
240000151013      *            *              * account type switch                *
240100151105      * Noble T    * 2015/10/29   * RFS152582 - Fix for Switch option M*
240200151105      *            *              * calculation issue.                 *
240300160127      * Aarthi M   * 2015/11/04   * RFS135318 - Withholding tax applied*
240400160127      *            *              * on AHA repayment for non residents.*
240500151201      * Sethu B    * 2015/11/12   * RFS152940 - GIC renewal results in
240600151201      *            *              * commission being deducted from
240700151201      *            *              * gross amount
240800151218      * Kahakashan * 2015/12/10   * RFS153113 - Fix for payment type
240900151218      *            *              * 'S' for a EFT transaction
241000160303      * Lev O      * 2016/01/25   * RFS155857 - Rollback 153113.
241100160127      * Jeyarajan V* 2016/01/06   * RFS154704 - Commission recovery on
241200160127      *            *              * chargeback fund too high
241300160303      * Shaik Rabs * 2016/01/14   * RFS150033 - Principal in the DSC
241400160303      *            *              * purchase records are reduced by
241500160303      *            *              * redemption of BE-NL
241600160127      * Aarthi M   * 2016/01/27   * RFS155635 - Recompile for MFAINVMDP
241700160407      * Divya   V  * 2016/02/02   * RFS153983 - Include Copybook CPYCHKCON
241800160330      * Pooja K    * 2016/03/30   * RFS157743 - Changing the array size
241900160330      *            *              * of WS-SEG-ARRAY-CONTRACT to avoid
242000160330      *            *              * JOBDAILY going to MSGW
242100160405      * AARTHI M   * 2016/03/31   * RFS148978 - Phantom fund is not
242200160331      *            *              * removed after all unit redemption.
242300160421      * Kamal T    * 2016/03/23   * RFS156864 - Incorrect GDV calculation
242400160421      *            *              * in the year annuitant turning 75
242500160616      * Aarthi M   * 2016/04/18   * RFS158477 - Phantom fund removal for
242600160616      *            *              * for all unit wire order sell
242700160615      * Vinsfy J   * 2016/06/01   * RFS159925 - Free not to be added
242800160615      *            *              * when transacation is rejected.
242900160818      * Swathi J   * 2016/08/18   * RFS162289 - Net Year to Date Minimum
243000160818      *            *              * Paid amount is incorrect due
243100160818      *            *              * to backdated transaction
243200160902      * Muthukumar * 2016/08/26   * RFS162192 - Non-Residential tax incorrectly
243300160902      *            *              * applied to 100% ROC due to incorrect
243400160902      *            *              * Initialization
243500160922      * Divya   V  * 2016/09/20   * RFS160618 - Occasional negative closing unit
243600160922      *                           * balances in Account Investment File
243700161028      * Sethu B    * 2016/07/27   * RFS159011 - Adjust GBV, GMV and GDV
243800161028      *                           * after cash distribution
243900170103      * Sethu B    * 2016/12/21   * RFS164509 - TRNPST on Multi-Thread orrectly
244000170103      *            *              *  mode for Seg Fund Clients running t
244100170103      *            *              * slow
244200110217      ************************** *Last* **************************************
244300170103      * Digvijay   *  2016/12/28  * RFS 164509 - Optimization of
244400170103      *            *              * runtime - changing compiler option
244500170103      *            *              * and commenting CANCEL
244600170302      * Divya   V  * 2017/01/03   * RFS166545 - Recompile for MFATRTXRP
244700170309      * Aarthi M   * 2017/03/09   * RFS161542 - Wholesaler commission reporting
244800170309      * Arthy K    * 2017/03/09   * RFS163650 - Auto Switch functionality
244900170406      * Lev O      * 2017/04/06   * RFS166873 - fix call from REGACCRCON
245000170406      *            *              *   to use FXTAXPRP when required.
245100170616      * Geethanjali* 2017/04/21   * RFS167385 - INC distribution amount
245200170616      *            *              * at year end were plced in closed
245300171016      *            *              * contracts
245400170616      * Sethu B    * 2017/05/04   * RFS167010 - GIC certificate automatically
245500170616      *            *              *  renewing with incorrect/missing information
245600170616      * Muthukumar * 2017/05/30   * RFS171012 - Transactions corresponding to FE
245700170815      *            *              * funds not updating PUP and RUP information.
245800170815      * Swathi J   * 2017/06/20   * RFS169088 - Performance Issue JOBDAILY
245900170722      * Suresh G.  * 2017/07/21   * RFS171752 - Recompile of MFAACCCSP
246000170906      * Muthukumar * 2017/08/22   * RFS168133 - To exempt Top-up deposits
246100170906      *            *              * from paying back-end commission and have
246200170906      *            *              * units bought through Top-Up considered
246300170906      *            *              * non-chargeable for DSC
246400171007      * Suresh G.  * 2017/09/18   * RFS169270 - Enhance AMS Fee to allow account
246500171011      *            *              * level negotiated fee rates.
246600171017      * AARTHI M   * 2017/10/13   * RFS170891 - DSC CHARGE IN TRNCDSC.
246700171017      * Sairam     * 2017/08/30   * RFS170676 - To Fix incorrect total in
246800171017      *            *              * LBSFED report.
246900171017      * Sethu B    * 2017/10/17   * RFS171078 - Equity GIA: Some contracts
247000171017      *            *              * don't have CMD and annuitant
247100180131      * Muthukumar * 2017/12/27   * RFS171134 - CDSC Charged on Switch-In in a
247200180131      *            *              * switch between BE funds.
247300180131      * Joel Dsouza* 2018/01/03   * RFS176274 - Changes to transfer transactions
247400180131      *            *              * when there are partial assignments
247500180131      * Muthukumar * 2018/01/09   * RFS177042 - JOBDAILY not progressing when
247600180131      *            *              * called for processing AOT
247700180131      * Suresh G.  * 2018/01/25   * RFS177527 - To fix retrofit issue of 176274
247800180509      *            *              * and 177042 for ALL client
247900180517      * Joel Dsouza* 2018/05/17   * RFS1000550- To not allocate large
248000180517      *            *              * Process Sequence No.
248100180614      * Jeyarajan V* 2018/05/29   * RFS178416- Waive ERF is not working for
248200181015      *            *              * split option 'T'.
248300181015      * Aarthi M   * 2018/06/28   * RFS177796- Trade rejected with insufficient
248400181015      *            *              *  unit balance.
248500180709      * Lavanya V  * 2018/07/09   * RFS176315- Maximum Threshold Validation
248600180718      * Joel Dsouza* 2018/07/10   * RFS1002132- Incorrect units updating on MFR
248700180726      * Aarthi M   * 2018/07/05   * RFS177665 - ERF Carry over age of units
248800180727      *            *              * after switch.
248900181017      * Jeyarajan V* 2018/07/18   * RFS176052 - Top up transaction triggered
249000181017      *            *              * a commission and DSC charges.
249100180927      * Prasanna   * 2018/09/27 * RFS1005795 Added new parms to XINRRPTMIN
249200181204      * Jeyarajan V* 2018/11/28   * RFS181243 - Commission is charged on MAT BUY
249300181204      *            *              * transaction despite excemption rule 19
249400181205      *            *              * in place
249500190126      * Jeyarajan V* 2019/01/26   * RFS1006147- ERF being charged incorrectly on
249600190126      *            *              * Distributions
249700190404      * Kavya K    * 2019/02/21   * RFS181057- Recompile for MFAINVMDP
249800190404      * Sachin S   * 2019/02/26   * RFS181857- Distribution to be taken
249900190415      *                             as Cash free of DSC even if there
250000190404      *                             are no more free units available
250100190404      *                             in the unitholder's account
250200190404      * Jeyarajan V* 2019/02/12   * RFS1008937- NL funds creating dsc records
250300190415      * Mayilsamy D* 19-Mar-2019  * RFS182913 - Added WS-FILE-STATUS to
250400190626      *                           * Account-Contract-SPIA file to ignore
250500190415      *                           * file already open error
250600190527      * Swathi J   * 2019/05/27   * JOBDAILY on MSGW with RDSP module and
250700190527      *            *              * withholding Tax credit code activated
250800190704      * Mayilsamy D* 2019/06/04   * RFS1014578- To Fix RFS181857
250900190704      *            *              * DSC charges on the cash distribution
251000190704      *            *              * pay out
251100190704      * Thilaga K  * 2019/06/18   * RFS183352 - New GIC Commission Calculation
251200190704      *            *              * formula
251300190726      * Thilaga K  * 2019/07/23   * RFS1015039- INT adj Transaction not
251400190726      *            *              * reallocate units back to contract.
251500190730      * Lev O      * 2019/07/30   * RFS1017119-increase mfatrnepp
251600190730      *            *              *     array size
251700190730      * Jebastin K * 2019/07/30   * RFS1015022-Recompile of MFATRNBP
251800190730      *            *              *           -Recompile of MFATRNEHP
251900190801      * Gomathi S  * 2019/07/22   * RFS181302 -Insufficient Unit      *
252000190801      *            *              * balance rejection reason  received
252100190801      *            *              * When we process RDRAHA formula
252200190909      * Sasi Kumar * 2019/08/23   * RFS1017282-Not to post ERF for
252300190909      *            *              * distributions with zero Units
252400190801      *
252500190819      * Mayilsamy D* 2019/08/19   * RFS183140- Added new logic to
252600190819      *            *              * calculate NR Tax for
252700190819      *            *              * Pre-Maturity Redemption
252800190927      * Mayilsamy D* 2019/09/26   * RFS184858 - Introduced New mode
252900190927      *            *              * "EST" to handle Linked Notes
253000190927      *            *              * Performance issues for prematurity
253100190927      *            *              * redemption.
253200191015      *Muthukumar S* 2019/10/09   * RFS182531 - AOT Money market purchase
253300191015      *            *              * processed during the period end is not
253400191015      *            *              * generating the INT transactions
253500191015      *Muthukumar S* 2019/10/11   * RFS1016245 - AOT Money market All unit
253600191015      *            *              * Redemption is not generating the INT
253700191016      *            *              * adjustment transaction correctly
253800191015      *Muthukumar S* 2019/10/15   * RFS1016514 - AOT Money market Switches
253900191015      *            *              * are not generating the INT transactions
254000191016      *            *              * during the period end
254100191018      *Mayilsamy D * 2019/10/14   * RFS1016152 - Introduced New edit
254200191018      *            *              * code "SKPREJ" to skip the rejected
254300191018      *            *              * trades
254400191030      * Thilaga K  * 2019/10/25   * RFS1018885- INT transaction not
254500191030      *            *              * reallocate units back to contract.
254600191030      * Joel Dsouza* 2019/10/03   * RFS182952-Skip updating free DSC at acc
254700191030      *                           * lvl for switch in to same account
254800191030      * Priya N    * 2019/10/04   * RFS184348 - ERF Carry over on
254900191030      *            *              * Auto Switch
255000191124      * Priya N    * 2019/11/15   * RFS185037 - Recompile of MFABNKACP
255100200122      * Joel Dsouza* 2019/11/08   * RFS1017341- Update annuitant details
255200200122      *            *              * after transfer in kind
255300200122      *Muthukumar S* 2020/01/08   * RFS1027849 - Remove the changes
255400200122      *            *              * delivered in 182531, 1016514 and 1016245
255500200224      *Niranjan    * 2020/02/14   * RFS180682 - Move all available amt to gross
255600200224      *            *              * amt of TRANS if placed as all units,
255700200224      *            *              * move assignment flag is  Yes and there's no
255800200224      *            *              * rejection in assignment  carryover process.
255900200302      *Chaya sp    * 2020/01/18   * RFS185066 - Recompile for MFAGICDP
256000200317      *Ewa K.      * 2020/03/17   * RFS185790 - Recompile for MFAINVLNP.
256100200330      *Poojasri M  * 2020/02/19   * RFS1021595 - Recompile for CPYTPSEG
256200200330      *            *              * changes
256300200420      *Raja N      * 2020/01/30   * RFS185169 - DJT Seg Fund Due
256400200420      *            *              * Diligence - Gap Development - GMWB
256500200420      *            *              * Product (GRM)
256600200330      *Suresh P    * 2020/03/03   * RFS1020345 - Modify transaction post
256700200330      *            *              * program to read trans broker detail
256800200414      *Muthukumar S* 2020/04/02   * RFS1021726 - Adjust the accrual amount for
256900200414      *            *              * INT transaction manually placed to replace
257000200507      *            *              * the previous period INT being reversed
257100200507      *Jebastin K  * 2020/03/03   * RFS1015797 - Fix for DSC Negative funds.
257200200507      *M K SINDHU  * 2020/04/22   * RFS1020521 - RFS1020521 DAP rejected Max
257300200420      *            *              * taxable portion $10 000.00
257400200122      *Sasikumar B * 2020/04/17   * RFS185170 - DJT - handling optional riders
257500200522      *Chaya SP    * 2020/05/22   * RFS1027904 - Modifed to match the
257600200522      *            *              * transaction to correct contract under
257700200522      *            *              * Trans-Contract-Details table.
257800200612      * vignesh    * 2020/06/12   * RFS185171 - Recompile for MFAACLBENP
257900200704      * Mayilsamy D* 2020/07/04   * RFS186092 - Recompile              *
258000200706      * CHAYA SP   * 2020/07/06   * RFS185172 - Recompile for MFAACCONP*
258100200824      * surendranC * 2020/07/06   * RFS184676 - DBG % Changes          *
258200200824      * Thilaga    * 2020/07/02   * RFS184842 - Process maturity transactions
258300200824      *            *              * of Multi GIC instructions
258400200824      * Vignesh    * 2020/06/24   * RFS183812 - Recompile of MFAFINSCP
258500200824      * M K SINDHU * 2020/07/08   * RFS185172 - Recompile for MFATRCODP
258600200828      *Richard S   * 2020/08/10   * RFS1103110 - ensure that all-unit
258700200828      *            *              * switch from a money market fund will
258800200828      *            *              * not become understated when move
258900200828      *            *              * assignment flag is set to Yes.
259000200824      * Kamal T    * 2020/08/19   * RFS186430 - Changes to retrieve row ID
259100200824      *            *              * using a function for account level GLWB
259200200824      *            *              * write of MFAACLBENP
259300200824      * Sasikumar B* 2020/06/29   * RFS185172 - Maturity Guarantees and
259400200824      *            *              *             Death Benefit Guarantee
259500200706      *            *              *             Enhancement
259600200826      * Mayilsamy D* 2020/08/20   * RFS185892 -Modified the program
259700200826      *            *              * logic to generate Zero withholding
259800200826      *            *              * tax for the Accounts having the
259900200826      *            *              * attribute 'INDST'.
260000200918      * Ashwini B  * 2020/09/18   * RFS185176 - Change of Guarantee
260100200918      *            *              * Enhancement
260200201001      * Joel Dsouza* 2020/09/18   * RFS1102149 - Set flag to aid GDV% retrieval
260300201001      *            *              * in PROCESS-SEG-SELL section, & GDV% checks
260400201009      * Kamal T    * 2020/10/05   * RFS1104462 - Changes to exclude transfers
260500201009      *            *              * with bonus commission from DSC free dollar
260600201009      *            *              * calculation
260700201009      * Niranjan   * 2020/10/04   * RFS1104781 - Determine whether the
260800201118      *            *              * transaction is generated by JOBGIC
260900201202      * Kavya K    * 2020/10/13   * RFS186497 - Recompile for MFAACMDP
261000201202      * Niranjan   * 2020/10/23   * RFS1106077 - Duplicate renewal trans
261100201202      *            *              * created in multithread during GIC maturity
261200201223      *            *              * process
261300201223      * Lev O      * 2020/11/05   * RFS185174 - (1) Charges based on
261400201223      *            *              *   calendar Year.
261500201223      *            *              * (2) Free using prorated method
261600201223      *            *              * (3) Account level Free for FLDALF
261700201223      * Mayilsamy D* 2020/10/22   * RFS180707 - Modified the program
261800201223      *            *              * to calculate fund level DSC
261900201223      *            *              * calculation in account level dsc
262000201223      *            *              * environment based on "ACINDSC"
262100201223      *            *              * function code.
262200201211      * Jebastin S * 2020/11/26   * RFS1102637 - CDSC units not redeemped proper
262300201211      * Lev O      * 2020/12/01   * RFS186665 - Recompile for MFAINVSCP
262400201211      *            *              *  DMC for RFS185174.
262500201223      * Surendran C* 2020/12/21   * RFS1027333-To fix ZFRACT Transfer
262600201223      *            *              * code WOR TRO/TRI Trade rejection
262700201222      * Chaya SP   * 2020/10/19   * RFS180721 - Recompile for MFATRCODP
262800201222      *                           * and MFAACLBENP
262900201223      * Ashwini B  * 2020/12/23   * RFS180721 - LIB Option and LIB Year
263000201223      *            *              * Anniversary
263100201224      * Joel Dsouza* 2020/12/09   * RFS186198 - Multi SETPOL in account
263200201224      *            *              * guarantee tracking environment
263300201224      * VIGNESH    * 2020/11/12   * RFS185455 -Death and Maturity Reset
263400210217      * Sasikumar B* 2020/10/23   * RFS1104392- The contracts are not created
263500210217      *            *              * with the correct dates and the Death %
263600210217      *            *              * assgiend to the contract will be incorrect
263700210217      *            *              * for some of the purchases in the contract.
263800210217      *            *              * Changes are also tagged as 104392.
263900210217      * Lev O      * 2020/12/30   * RFS185174.1-def96895, 96896 - added
264000210217      *            *              *   validation for split F,M,T, rule 1.
264100210217      *            * 2021/01/05   * RFS185174.2-fix def to reduce free.
264200210331      * Mayilsamy D* 2021/02/17   * RFS1111244 - Fixed the Initialization
264300210331      *            *              * Issue.
264400210331      * Lev O      * 2021/02/25   * RFS1111837 - Fix for LIFO Free for
264500210331      *            *              *   FLDALF funds.
264600210407      * Lev O      * 2021/03/10   * RFS1111190 - 1. Stop treat FLDALF
264700210407      *            *              *  SWO/SWI as Sell and Buy
264800210407      *            *              *   2. FIX FLDALF LIFO with Matured.
264900210217      * Kavya K    * 2021/02/10   * RFS186088 - Recompile for MFAINVMDP.
265000210217      * Ashwini B  * 2021/02/15   * RFS187046 - Recompile for MFATRNREP,
265100210217      *            *              * MFAACLBENP
265200210217      * Kavin      * 2021/01/12   * RFS180708 - Recompile TRNPST
265300210218      * Kavin      * 2021/02/17   * RFS186290 - Recompile only
265400210226      * Gomathi    * 2021/01/07   * RFS1101968- No Tax charge for RDSP
265500210316      *            *              * closure account
265600210316      * Ragavi S   * 2021/03/16   * RFS85788 - Distribution default option
265700210303      * Bagathsingh* 2021/03/03   * RFS1110228- Fix to not pick up -Ve
265800210303      *            *              * AWD amount for processing trade in
265900210303      *            *              * Hierarchy withdrawal.
266000210323      * Jebastin S * 2021/03/23   * RFS1104788 - NL funds free units fix
266100210607      * Joel Dsouza* 2021/04/15   * RFS1113795 - Reject with 81 if unit
266200210607      *            *              * amt < 0.001 & with hier is active
266300210607      * Lev O      * 2021/04/26   * RFS1113991 - Fix to use free for
266400210607      *            *              *  partial redemptions.
266500210512      * Mayilsamy D* 2021/05/07   * RFS186888 - Modified to calculate
266600210512      *            *              * DSC charges only on LIA Excess
266700210512      *            *              * amount.
266800210527      * Ragavi S   * 2021/05/12   * RFS1115144- JOBDAILY/TRNPST in MSGW
266900210527      *            *              * on RDSP pre-processing job
267000210531      * Ragavi S   * 2021/05/31   * RFS186729 - Error handling in TRNPST
267100210806      * JasonJoshua* 2021/06/16   * RFS1113955 - Recompile TRNPST
267200210720      * Sasikumar B* 2021/06/29   * RFS1113880 - Recompile TRNPST
267300210720      * Ashwini B  * 2021/06/10   * RFS1115650 -  Effective date is stamped
267400210720      *            *              * to transfer in account when effect date
267500210806      *            *              * is set to 'N' in RFSGTRFO.
267600210806      * Mayilsamy D* 2021/07/13   * RFS1117913- Added logic to read
267700210806      *            *              * only Account Benefits file to fix
267800210806      *            *              * file lock issues.
267900210720      * Swathi J   * 2021/05/17   * RFS1114811 - Transaction got reject
268000210720      *            *              * and stuck in CHQ status
268100210720      * Vignesh    * 2021/07/07   * RFS187254 - Recompile for MFATRCODP
268200210720      * M K SINDHU * 2021/07/13   * RFS186771 - RECOMPILE MFAACRIFP
268300210720      *                           * AND MFAACLIF
268400210720      * Jason      * 2021/06/21   * RFS186771 - Tax NR4 Issue with PPPA      *
268500210720      *     Joshua *              *                                          *
268600210720      * Ewa K.     * 2021/06/23   * RFS186019 - Generate MFR trades for      *
268700210720      *            *              * full redemption and REGR MFR group.      *
268800210720      * Niranjan   * 2021/06/28   * RFS1113362 - Include Account level
268900210629      *            *              * ACB with enhanced T5
269000210720      * Niranjan   * 2021/06/25   * RFS1115261 - Declarations for MFAACCONP
269100210720      *            *              * and MFATRCODP
269200210730      * Kavin      * 2021/07/30   * RFS1117871 - Check capital payment option*
269300210730      *            *              * and call FXCKMULGIC only for certificates*
269400210730      *            *              * having multiple instructions             *
269500210804      * Mayilsamy D* 2021/08/04   * RFS1118005 -Recompile                    *
269600210914      * Kavin      * 2021/07/26   * RFS1117962 - JOBDAILY performance
269700210914      *            *              * issue for DJT
269800210914      * Lev O      * 2021/08/23   * RFS1118263 - Fix FLDALF swi to assign
269900210914      *            *              *  Free units/dollars.
270000210914      * Kavin K    * 2021/08/09   * RFS187471 - Guaranteed Death Percent
270100210914      *            *              * will be calculated and stamped
270200210914      *            *              * on the Contract as per Annuitant's
270300210914      *            *              * age using 'Annuitant Age Calc Rule'
270400210914      *            *              * if "Apply % at deposit TD" is set
270500210914      *            *              * to Yes in Guaranteed Death Value
270600210914      *            *              * Schedule (SCGNDTVL).
270700210927      * Lev O      * 2021/09/22   * RFS1120696 - Fix FLDALF swi to assign
270800210922      *            *              *  Free units/dollars within same account
270900210922      *            *              *  for split opts F, T.
271000210922      *            *              *  1.Do not change free at acc level
271100210922      *            *              *  2.Do not additional deposits at acc lvl
271200210916      * Ewa K.     * 2021/09/16   * RFS186588 - Log event of status change   *
271300210927      *            *              * into 'CON','HST',into MFATRNSEQP table.  *
271400210927      * Niranjan   * 2021/09/08   * RFS1119590 - Changes for Net AWD Sell    *
271500210927      *            *              * with split options M/F generated by With-*
271600210927      *            *              * drawal Hierarchy                         *
271601210928      * Ewa K.     * 2021/09/28   * RFS186588 - Fix logging 2 sided trades   *
271602210928      *            *              * twice into MFATRNSEQP.                   *
271603210929      * Aarthi M   * 2021/09/29   * RFS1115172 - Accrual Paid twice for All  *
271604210929      *            *              * Unit Sell.                               *
271605211004      *Muthukumar S* 2021/10/04   * RFS1115611 - Increase the size of array  *
271606211004      *            *              * WS-TEP-ARRAY                             *
271700210927      ************************************************************************
